<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤§é˜ªç¥æˆ¶å¯’å‡è¡Œ 2026 (é›²ç«¯ç‰ˆ)</title>
    
    <!-- 1. è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'jp-red': '#b91c1c',
                        'jp-black': '#1c1917',
                        'jp-offwhite': '#f5f5f4',
                    }
                }
            }
        }
    </script>
    
    <!-- 2. è¼‰å…¥ Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        body {
            background-color: #f5f5f4;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Loading Spinner */
        .loader {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #44403c;
            width: 24px;
            height: 24px;
            -webkit-animation: spin 1s linear infinite; /* Safari */
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- 3. React + Firebase æ‡‰ç”¨ç¨‹å¼é‚è¼¯ -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'https://esm.sh/react@18?dev';
        import { createRoot } from 'https://esm.sh/react-dom@18/client?dev';
        import { 
            MapPin, Navigation, Utensils, Train, CloudSun, Calendar, 
            CreditCard, Plane, BedDouble, ChevronDown, ChevronUp, 
            Info, ShoppingBag, Plus, Trash2, Coffee, ExternalLink, 
            FileSpreadsheet, Footprints, AlertTriangle, ArrowRightCircle,
            Camera, Ticket, Ship, Car, Landmark, Bus, Image as ImageIcon, 
            Lock, KeyRound, Store, ShoppingCart, Trees, FerrisWheel,
            Wallet, UploadCloud, RefreshCw, XCircle, CheckCircle2, WifiOff, Save
        } from 'https://esm.sh/lucide-react@0.263.1?dev';

        // --- Firebase SDK Imports ---
        import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getFirestore, collection, doc, getDoc, setDoc, 
            addDoc, onSnapshot, query, orderBy, deleteDoc, serverTimestamp,
            initializeFirestore, memoryLocalCache 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // å»ºç«‹ Icon å°ç…§è¡¨
        const ICON_MAP = {
            MapPin, Navigation, Utensils, Train, CloudSun, Calendar,
            CreditCard, Plane, BedDouble, ChevronDown, ChevronUp,
            Info, ShoppingBag, Plus, Trash2, Coffee, ExternalLink,
            FileSpreadsheet, Footprints, AlertTriangle, ArrowRightCircle,
            Camera, Ticket, Ship, Car, Landmark, Bus, ImageIcon,
            Lock, KeyRound, Store, ShoppingCart, Trees, FerrisWheel,
            Wallet, UploadCloud, RefreshCw, XCircle, CheckCircle2, WifiOff, Save
        };

        const getIcon = (iconName) => {
            return ICON_MAP[iconName] || MapPin;
        };

        // ==========================================
        // ğŸ”¥ è¨­å®šå€ï¼šFirebase Config ğŸ”¥
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyDc4SevImnUI9VgyOPdlWBsLXY7jfujRyU",
            authDomain: "jptrip202601-3df97.firebaseapp.com",
            projectId: "jptrip202601-3df97",
            storageBucket: "jptrip202601-3df97.firebasestorage.app",
            messagingSenderId: "590547128124",
            appId: "1:590547128124:web:e75559668273588da31839"
        };

        // åˆå§‹åŒ– Firebase
        let db;
        let isFirebaseReady = false;
        let initErrorMsg = "";

        try {
            if (firebaseConfig.apiKey) {
                if (getApps().length === 0) {
                    const app = initializeApp(firebaseConfig);
                    // ä½¿ç”¨æœ€ä¿å®ˆç©©å®šçš„è¨­å®šï¼šè¨˜æ†¶é«”å¿«å– + å¼·åˆ¶é•·è¼ªè©¢
                    db = initializeFirestore(app, {
                        localCache: memoryLocalCache(),
                        experimentalForceLongPolling: true 
                    });
                    console.log("Firebase initialized (New Instance with Long Polling)");
                } else {
                    const app = getApp();
                    try {
                        db = getFirestore(app);
                    } catch {
                         db = initializeFirestore(app, {
                            localCache: memoryLocalCache(),
                            experimentalForceLongPolling: true
                        });
                    }
                    console.log("Firebase initialized (Existing Instance)");
                }
                isFirebaseReady = true;
            } else {
                initErrorMsg = "è¨­å®šæª”ç©ºç™½";
                console.warn("Firebase config is missing!");
            }
        } catch (e) {
            console.error("Firebase init error:", e);
            initErrorMsg = e.message;
        }

        // --- é è¨­è¡Œç¨‹è³‡æ–™ (å®Œæ•´ç‰ˆï¼šåŒ…å«æ‰€æœ‰è©³ç´°è³‡è¨Š) ---
        const DEFAULT_TRIP_DATA = {
            flights: {
                outbound: { 
                    date: "1/11", 
                    from: "å°ä¸­ RMQ æ¸…æ³‰å´—æ©Ÿå ´ T2", 
                    time: "09:00", 
                    to: "ç¥æˆ¶ UKB ç¥æˆ¶æ©Ÿå ´ T2", 
                    arrival: "12:30",
                    image: "https://images.unsplash.com/photo-1436491865332-7a61a109cc05?auto=format&fit=crop&q=80&w=800"
                },
                inbound: { 
                    date: "1/18", 
                    from: "ç¥æˆ¶ UKB ç¥æˆ¶æ©Ÿå ´ T2", 
                    time: "13:30", 
                    to: "å°ä¸­ RMQ æ¸…æ³‰å´—æ©Ÿå ´ T2", 
                    arrival: "16:00" 
                }
            },
            hotels: [
                {
                    period: "1/11 - 1/15",
                    name: "å¤§é˜ªé›£æ³¢ç›¸éµ GRAND FRESA",
                    address: "1 Chome-1-13 Nipponbashi, Chuo Ward, Osaka",
                    checkIn: "15:00",
                    checkOut: "11:00",
                    note: "è¿‘éµæ—¥æœ¬æ©‹ç«™ Exit 10 (æœ‰é›»æ¢¯) / é£¯åº—ä½æ–¼å…¨å®¶ä¾¿åˆ©å•†åº—æ—",
                    image: "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&q=80&w=800" 
                },
                {
                    period: "1/15 - 1/18",
                    name: "ç¥æˆ¶è’™ç‰¹åˆ©é…’åº— Hotel Monterey Kobe",
                    address: "2 Chome-11-13 Shimoyamatedori, Kobe",
                    checkIn: "15:00",
                    checkOut: "11:00",
                    note: "æ­å¼ä¸­ä¸–ç´€é¢¨æ ¼å»ºç¯‰ / ç”Ÿç”°ç¥ç¤¾é™„è¿‘",
                    image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&q=80&w=800"
                }
            ],
            itinerary: [
                {
                day: 1,
                date: "1/11 (æ—¥)",
                location: "å¤§é˜ª",
                weather: "æ™´æ™‚å¤šé›² 8Â°C",
                events: [
                    { type: 'flight', time: "12:30", title: "æŠµé”ç¥æˆ¶æ©Ÿå ´", desc: "å‰å¾€å¤§é˜ªé›£æ³¢" },
                    { 
                    type: 'transport', 
                    time: "13:00", 
                    title: "ç§»å‹•ï¼šæ©Ÿå ´ â†’ å¤§é˜ªé£¯åº—", 
                    desc: "ç¥æˆ¶æ©Ÿå ´æ­ Port Liner è½‰ é˜ªç¥é›»è»Šã€‚",
                    isImportant: true,
                    detailedGuide: {
                        title: "1/11 ç§»å‹•æ”»ç•¥ï¼šæ©Ÿå ´ â” å¤§é˜ª",
                        strategy: "Port Liner + é˜ªç¥é›»è»Š (é—œéµåœ¨ä¸‰å®®è½‰è»Š)",
                        steps: [
                            { icon: "Plane", title: "Step 1: æ©Ÿå ´ â†’ ä¸‰å®®", desc: "1. æŠµé”å£ (1F) æ­é›»æ¢¯ä¸Š 2Fã€‚\n2. æ­ä¹˜ Port Liner å¾€ã€Œä¸‰å®®ã€ã€‚\nğŸ’° ç¥¨åƒ¹ï¼š340 æ—¥åœ“" },
                            { icon: "ArrowRightCircle", title: "Step 2: ä¸‰å®®è½‰è»Š (é—œéµï¼)", desc: "Port Liner å‡ºç«™å¾€å³çœ‹ï¼Œæ‰¾ç¶ è‰² MINT ç™¾è²¨ã€‚\nâœ… æ¨è–¦ï¼šæ‰¾å…¥å£é™„è¿‘é›»æ¢¯ç›´é” B1ï¼Œé€²ã€Œé˜ªç¥é›»è»Š æ±æ”¹æœ­å£ã€ã€‚" },
                            { icon: "Train", title: "Step 3: æ­ä¹˜é˜ªç¥é›»è»Š", desc: "æœˆå°ï¼š2 è™Ÿæœˆå° (å¾€å¤§é˜ªé›£æ³¢/å¥ˆè‰¯)ã€‚\nâš ï¸ ä¸‹è»Šæ³¨æ„ï¼šç¶“éé›£æ³¢ç«™ã€Œè«‹å‹¿ä¸‹è»Šã€ï¼å¤šæ­ä¸€ç«™è‡³ã€Œè¿‘éµæ—¥æœ¬æ©‹ã€ä¸‹è»Šã€‚\nğŸ’° ç¥¨åƒ¹ï¼šç´„ 630 æ—¥åœ“ (é˜ªç¥+è¿‘éµ)" },
                            { icon: "MapPin", title: "Step 4: æ—¥æœ¬æ©‹ç«™ â†’ é£¯åº—", desc: "èµ°æ±æ”¹æœ­å£ï¼Œæ‰¾ Exit 10 (æœ‰é›»æ¢¯)ã€‚\nåœ°é¢ï¼šå‡ºé›»æ¢¯éé¦¬è·¯åˆ°å°é¢(åŸ6è™Ÿå‡ºå£å´)ï¼Œå¾€åŒ— (é€†è»Šæµ) èµ°ï¼Œéå…¨å®¶å³æŠµé”ã€‚" }
                        ]
                    } 
                    },
                    { 
                        type: 'food', 
                        time: "14:30", 
                        title: "åˆé¤ï¼šç‰›ã‹ã¤ã‚‚ã¨æ‘", 
                        desc: "åŠç†Ÿç‚¸ç‰›æ’å®šé£Ÿï¼Œå¯è‡ªå·±çƒ¤ã€‚é€šå¸¸éœ€æ’éšŠã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,400 ~ Â¥2,200\nğŸ“ åœ°å€ï¼šGour Cuss City, 2 Chome-4-2 Shinsaibashisuji, Chuo Ward, Osaka\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š11:00-22:00 (L.O. 21:00)\nğŸš¶ äº¤é€šï¼šå¾é£¯åº—æ­¥è¡Œç´„ 9 åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šçŸ³æ¿ç¾çƒ¤ï¼Œè‚‰è³ªè»Ÿå«©ï¼Œæ¨è–¦æ²¾èŠ¥æœ«é†¬æ²¹ã€‚",
                        tags: ["å¿…åƒ", "æ’éšŠååº—"],
                        address: "Gour Cuss City, 2 Chome-4-2 Shinsaibashisuji, Chuo Ward, Osaka" 
                    },
                    { 
                        type: 'spot', 
                        time: "16:00", 
                        title: "é»‘é–€å¸‚å ´ / é“é “å €", 
                        desc: "é€›è¡—ã€åƒå°åƒã€è·‘è·‘äººçœ‹æ¿ã€‚", 
                        subDesc: "â° ç‡Ÿæ¥­æ™‚é–“ï¼šé»‘é–€å¸‚å ´ç´„è‡³ 18:00ï¼Œé“é “å €åº—å®¶ç‡Ÿæ¥­è‡³æ·±å¤œ\nğŸ“ é‡é»ï¼šé»‘é–€å¸‚å ´å¿…åƒæµ·é®®ã€è‰è“å¤§ç¦ï¼›é“é “å €å¿…æ‹è·‘è·‘äººã€‚\nğŸ’¡ æé†’ï¼šéƒ¨åˆ†åº—å®¶åªæ”¶ç¾é‡‘ã€‚",
                        address: "Dotonbori, Osaka" 
                    }
                ]
                },
                {
                day: 2,
                date: "1/12 (ä¸€)",
                location: "çµç¶æ¹–",
                weather: "å¤šé›² 5Â°C",
                events: [
                    { type: 'transport', time: "07:50", title: "KKday é›†åˆ", desc: "è¿‘éµæ—¥æœ¬æ©‹è»Šç«™2è™Ÿå‡ºå£é›†åˆ (07:50-08:00)", address: "è¿‘éµæ—¥æœ¬æ©‹è»Šç«™" },
                    { 
                        type: 'spot', 
                        time: "10:20", 
                        title: "ç™½é ˆç¥ç¤¾", 
                        desc: "æ‹æ”æ¹–ä¸­å¤§é³¥å±…ï¼Œè¿‘æ±Ÿæœ€å¤è€çš„å¤§ç¤¾ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šæ»‹è³€çœŒé«˜å³¶å¸‚éµœå·215\nğŸ’¡ ç‰¹è‰²ï¼šæ°´ä¸­é³¥å±…æ™¯è‰²çµ•ç¾ï¼Œæœ‰ã€Œè¿‘æ±Ÿåš´å³¶ã€ä¹‹ç¨±ã€‚\nâ° åœç•™æ™‚é–“ï¼šç´„ 40 åˆ†é˜",
                        tags: ["æ‹ç…§ç†±é»"] 
                    },
                    { 
                        type: 'spot', 
                        time: "11:30", 
                        title: "çµç¶æ¹–è§€æ™¯å° (Biwako Valley)", 
                        desc: "æ­ä¹˜æ—¥æœ¬æœ€å¿«çºœè»Šå‰å¾€æ¨™é«˜1100mçš„è§€æ™¯å°ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šæ»‹è³€çœŒå¤§æ´¥å¸‚æœ¨æˆ¸1547-1\nğŸ’° çºœè»Šè²»ç”¨ï¼šå¾€è¿”ç´„ Â¥3,500 (é€šå¸¸å«åœ¨åœ˜è²»æˆ–è‡ªç†)\nğŸ’¡ ç‰¹è‰²ï¼šThe Main éœ²å°å¯ä¿¯ç°çµç¶æ¹–å…¨æ™¯ã€‚",
                        tags: ["çµ•æ™¯"]
                    },
                    { 
                        type: 'spot', 
                        time: "15:10", 
                        title: "La Collina è¿‘æ±Ÿå…«å¹¡", 
                        desc: "åƒå‰åœåŠ›å‹•ç•«å ´æ™¯çš„ç”œé»ç«¥è©±æ‘ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šæ»‹è³€çœŒè¿‘æ±Ÿå…«å¹¡å¸‚åŒ—ä¹‹åº„ç”º615-1\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š09:00-18:00\nğŸ’¡ å¿…åƒï¼šå‰›å‡ºçˆçš„å¹´è¼ªè›‹ç³• (Baumkuchen)ï¼Œä¿å­˜æœŸé™çŸ­åªèƒ½ç¾å ´åƒã€‚",
                        tags: ["ç”œé»", "ç¶²ç¾æ™¯é»"] 
                    },
                    { 
                        type: 'food', 
                        time: "19:00", 
                        title: "æ™šé¤ï¼šåŒ—æ¥µæ˜Ÿè›‹åŒ…é£¯", 
                        desc: "è›‹åŒ…é£¯ç™¼æºåœ°ï¼Œå‚³çµ±æ—¥å¼æ¦»æ¦»ç±³åº§ä½(éœ€è„«é‹)ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,080 ~ Â¥1,600\nğŸ“ åœ°å€ï¼šå¤§é˜ªå¸‚ä¸­å¤®å€è¥¿å¿ƒé½‹æ©‹2-7-27\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š11:30~21:30\nğŸš¶ äº¤é€šï¼šå¾é£¯åº—æ­¥è¡Œç´„ 12 åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šç™¾å¹´è€å±‹ï¼Œå¿…é»é›è‚‰è›‹åŒ…é£¯ã€‚",
                        tags: ["å¿…åƒ", "è€åº—"],
                        address: "2 Chome-7-27 Nishishinsaibashi, Chuo Ward, Osaka" 
                    }
                ]
                },
                {
                day: 3,
                date: "1/13 (äºŒ)",
                location: "äº¬éƒ½è¿‘éƒŠ",
                weather: "é™°çŸ­æš«é›¨ 4Â°C",
                events: [
                    { type: 'transport', time: "07:10", title: "KKday é›†åˆ", desc: "è¿‘éµæ—¥æœ¬æ©‹è»Šç«™2è™Ÿå‡ºå£", address: "è¿‘éµæ—¥æœ¬æ©‹è»Šç«™" },
                    { 
                        type: 'spot', 
                        time: "09:50", 
                        title: "ä¼Šæ ¹èˆŸå±‹", 
                        desc: "æ—¥æœ¬å¨å°¼æ–¯ï¼Œå‚³çµ±è‡¨æµ·å»ºç¯‰ç¾¤ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šäº¬éƒ½åºœä¸è¬éƒ¡ä¼Šæ ¹ç”º\nğŸ’¡ ç‰¹è‰²ï¼šä¸€æ¨“ç‚ºèˆ¹åº«ã€äºŒæ¨“ç‚ºä½å®¶çš„ç¨ç‰¹å»ºç¯‰ã€‚\nğŸš¢ é«”é©—ï¼šå¯æ­ä¹˜éŠè¦½èˆ¹é¤µæµ·é·— (ç´„ Â¥1,000)ã€‚",
                        tags: ["çµ•æ™¯", "å‚³çµ±å»ºç¯‰"] 
                    },
                    { 
                        type: 'spot', 
                        time: "11:10", 
                        title: "å¤©æ©‹ç«‹è§€æ™¯å°", 
                        desc: "æ—¥æœ¬ä¸‰æ™¯ä¹‹ä¸€ï¼Œè‘—åçš„ã€Œé£›é¾è§€ã€ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šäº¬éƒ½åºœå®®æ´¥å¸‚\nğŸ’° çºœè»Š/å–®è»Œé›»è»Šï¼šå¾€è¿”ç´„ Â¥850\nğŸ’¡ ç©æ³•ï¼šèƒŒå°æ™¯è‰²å½è…°å¾è·¨ä¸‹çœ‹ï¼Œæ²™æ´²æœƒåƒä¸€æ¢é£›é¾åœ¨å¤©ã€‚",
                        address: "Amanohashidate Viewland" 
                    },
                    { 
                        type: 'spot', 
                        time: "14:40", 
                        title: "ç¾å±±èŒ…å±‹éƒ¨è½", 
                        desc: "äº¬éƒ½åˆæŒæ‘ï¼Œæ—¥æœ¬åŸç”Ÿé¢¨æ™¯ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šäº¬éƒ½åºœå—ä¸¹å¸‚ç¾å±±ç”º\nğŸ’¡ ç‰¹è‰²ï¼šç¾å­˜ç´„38æ£ŸèŒ…è‰å±‹ï¼Œå¯§éœçš„å±±æ‘æ°›åœã€‚\nğŸ¦ å¿…åƒï¼šç¾å±±ç‰›ä¹³éœœæ·‡æ·‹ã€é›è›‹å¸ƒä¸ã€‚",
                        tags: ["ä¸–ç•Œéºç”¢æ°›åœ"] 
                    },
                    { 
                    type: 'food', 
                    time: "19:00", 
                    title: "æ™šé¤ï¼šç‡’è‚‰åŠ›ä¸¸", 
                    desc: "åœ‹ç”¢ç‰›åƒåˆ°é£½ï¼Œè‚‰è³ªä½³ï¼ŒCPå€¼é«˜ã€‚", 
                    subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šåƒåˆ°é£½æ–¹æ¡ˆç´„ Â¥3,498 ~ Â¥5,808\nğŸ“ åœ°å€ï¼šæ—¥æœ¬ã€’542-0071 Osaka, Chuo Ward, Dotonbori, 1 Chome-9-1 5F\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š11:30~01:30\nğŸš¶ äº¤é€šï¼šèˆ‡é£¯åº—è·é›¢ç´„7åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šåšåˆ‡ç‰›èˆŒèˆ‡æ©«è†ˆè†œå¿…é»ã€‚",
                    tags: ["é ç´„åˆ¶", "ç‡’è‚‰"],
                    address: "1 Chome-9-1 Dotonbori, Osaka" 
                    }
                ]
                },
                {
                day: 4,
                date: "1/14 (ä¸‰)",
                location: "å‹å°¾å¯º/é‡‘é–£å¯º/åµå±±",
                weather: "æ™´æœ— 9Â°C",
                events: [
                    { 
                        type: 'transport', 
                        time: "07:45", 
                        title: "KKday é›†åˆ", 
                        desc: "æ—¥æœ¬æ©‹(å¤§é˜ª)è¿‘éµæ—¥æœ¬æ©‹2è™Ÿå‡ºå£é›†åˆã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼š1 Chome-3-3ç•ª11 Nipponbashi, Chuo Ward, Osaka\nâ° é›†åˆæ™‚é–“ï¼š07:45~08:00 (é€¾æ™‚ä¸å€™)\nâš ï¸ æé†’ï¼šè«‹èªæ˜ KKday é ˜éšŠæˆ–æ——å¹Ÿã€‚",
                        address: "1 Chome-3-3 Nipponbashi, Chuo Ward, Osaka" 
                    },
                    { 
                        type: 'spot', 
                        time: "10:00", 
                        title: "å‹å°¾å¯º (Katsuo-ji)", 
                        desc: "ç¥ˆæ±‚å‹é‹çš„éˆé©—å¯ºå»Ÿï¼Œæ»¿å±±æ»¿è°·çš„é”æ‘©ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šå¤§é˜ªåºœç®•é¢å¸‚å‹å°¾å¯º\nğŸ’° é–€ç¥¨ï¼šæˆäºº Â¥500\nâ° åœç•™æ™‚é–“ï¼šç´„70åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šéš¨è™•å¯è¦‹çš„è¿·ä½ é”æ‘©ï¼Œç¥ˆæ±‚è€ƒé‹èˆ‡å‹é‹ã€‚",
                        tags: ["å¿…å‹ç¥ˆé¡˜", "é”æ‘©"],
                        address: "Katsuo-ji" 
                    },
                    { 
                        type: 'spot', 
                        time: "12:45", 
                        title: "åµå±±æ•£ç­– & åˆé¤", 
                        desc: "æ¼«æ­¥ç«¹æ—å°å¾‘ã€æ¸¡æœˆæ©‹ã€å’Œæœæ£®æ—ã€‚", 
                        subDesc: "ğŸ“ åœ°æ¨™ï¼šæ¸¡æœˆæ©‹ã€é‡å®®ç¥ç¤¾\nâ° åœç•™æ™‚é–“ï¼šç´„ 150 åˆ†é˜\nğŸ’¡ æ¨è–¦ï¼š% Arabica å’–å•¡ã€äº¬è±†åºµè±†è…éœœæ·‡æ·‹ã€‚",
                        tags: ["ä¸–ç•Œéºç”¢", "ç«¹æ—"],
                        address: "Arashiyama Bamboo Grove" 
                    },
                    { 
                        type: 'spot', 
                        time: "16:15", 
                        title: "é‡‘é–£å¯º (Kinkaku-ji)", 
                        desc: "é–ƒè€€è‘—é‡‘è‰²å…‰è¼çš„èˆåˆ©æ®¿ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šäº¬éƒ½å¸‚åŒ—åŒºé‡‘é–£å¯ºç”º1\nğŸ’° é–€ç¥¨ï¼šæˆäºº Â¥500\nâ° åœç•™æ™‚é–“ï¼šç´„40åˆ†é˜\nâ° é–‹æ”¾æ™‚é–“ï¼š09:00-17:00\nğŸ’¡ æ‹ç…§ï¼šä¸‹åˆé™½å…‰ç…§å°„ä¸‹é‡‘ç¢§è¼ç…Œæœ€ç¾ã€‚",
                        tags: ["ä¸–ç•Œéºç”¢", "é‡‘ç¢§è¼ç…Œ"],
                        address: "Kinkaku-ji" 
                    },
                    { 
                        type: 'transport', 
                        time: "18:30", 
                        title: "è¡Œç¨‹çµæŸ", 
                        desc: "è¿”å›å¤§é˜ªè¿‘éµæ—¥æœ¬æ©‹ç«™è§£æ•£ã€‚", 
                        address: "è¿‘éµæ—¥æœ¬æ©‹è»Šç«™" 
                    },
                    { 
                        type: 'food', 
                        time: "19:00", 
                        title: "æ™šé¤ï¼šç¦å¤ªéƒå¤§é˜ªç‡’ æœ¬åº—", 
                        desc: "ç±³å…¶æ—æ¨è–¦çš„äººæ°£å¤§é˜ªç‡’ååº—ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,500 ~ Â¥2,500\nğŸ“ åœ°å€ï¼šå¤§é˜ªå¸‚ä¸­å¤®åŒºåƒæ—¥å‰2-3-17\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼šå¹³æ—¥ 17:00-23:30 / é€±æœ«å‡æ—¥ 12:00-23:30\nğŸ’¡ å¿…é»ï¼šè”¥èŠ±ç‡’ (Negiyaki)ï¼Œå£æ„Ÿé¬†è»Ÿæ»‘å«©ã€‚",
                        tags: ["ç±³å…¶æ—æ¨è–¦", "æ’éšŠååº—"],
                        address: "2 Chome-3-17 Sennichimae, Chuo Ward, Osaka" 
                    }
                ]
                },
                {
                day: 5,
                date: "1/15 (å››)",
                location: "ç§»å‹•æ—¥/ç¥æˆ¶",
                weather: "æ™´æ™‚å¤šé›² 8Â°C",
                events: [
                    { 
                    type: 'transport', 
                    time: "09:45", 
                    title: "ç§»å‹•ï¼šå¤§é˜ª â†’ ç¥æˆ¶", 
                    desc: "è¿‘éµæ—¥æœ¬æ©‹æ­ã€Œå¿«é€Ÿæ€¥è¡Œã€å¾€ç¥æˆ¶ä¸‰å®®ã€‚",
                    isImportant: true,
                    detailedGuide: {
                        strategy: "æœ€çœåŠ›ï¼è¿‘éµ/é˜ªç¥ç›´é€šé‹è½‰ (å…è½‰ä¹˜)",
                        steps: [
                            { icon: "Footprints", title: "Step 1: å‰å¾€è»Šç«™ (è¡Œææ”»ç•¥)", desc: "é›–ç„¶é£¯åº—åœ¨é›£æ³¢ï¼Œä½†é›¢ã€Œè¿‘éµæ—¥æœ¬æ©‹ç«™ã€æ›´è¿‘ã€‚\nâœ… è«‹èµ° Exit 10 (10è™Ÿå‡ºå£)ï¼Œæœ‰é›»æ¢¯ï¼\nâŒ é¿é–‹ Exit 6 (åªæœ‰æ¨“æ¢¯)ã€‚" },
                            { icon: "Train", title: "Step 2: é€²ç«™æ­è»Š (é—œéµ)", desc: "åˆ·å¡é€²ç«™ï¼Œå°‹æ‰¾å¾€ã€Œå°¼å´ãƒ»ç¥æˆ¶ä¸‰å®®ã€æœˆå°ã€‚\nâœ… è«‹æ­ä¹˜ï¼šç´…è‰²å­—é«”ã€Œå¿«é€Ÿæ€¥è¡Œ (Rapid Express)ã€\nâš ï¸ çµ•å°ç¦æ­¢ï¼šæ©˜è‰²å­—é«”ã€Œç‰¹æ€¥ (Limited Express)ã€ï¼Œé€™æ˜¯å…¨è»ŠæŒ‡å®šå¸­ï¼Œèª¤æ­éœ€è£œé«˜é¡ç¥¨åƒ¹ï¼" },
                            { icon: "ArrowRightCircle", title: "Step 3: æŠµé”ç¥æˆ¶ä¸‰å®®", desc: "åˆ—è»Šæœƒç›´é€šé˜ªç¥ç·šï¼Œä¸€è·¯ååˆ°ã€Œç¥æˆ¶ä¸‰å®®ç«™ (é˜ªç¥)ã€ä¸‹è»Šã€‚\nğŸ’¡ è«‹å¾€ã€Œè¥¿å£ (West Exit)ã€æ”¹æœ­å£å‡ºç«™ï¼Œé€™è£¡æœ‰æ‰‹æ‰¶æ¢¯æˆ–é›»æ¢¯ã€‚" },
                            { icon: "MapPin", title: "Step 4: æ­¥è¡Œè‡³é£¯åº—", desc: "å‡ºè¥¿å£å¾Œå¾€åŒ— (å±±å´) èµ°ï¼Œæ²¿ç”Ÿç”°è·¯æ­¥è¡Œç´„ 7-10 åˆ†é˜ï¼Œå³å¯çœ‹åˆ°æ­å¼å»ºç¯‰çš„è’™ç‰¹åˆ©é…’åº—ã€‚" }
                        ]
                    }
                    },
                    { type: 'hotel', time: "11:30", title: "å¯„æ”¾è¡Œæ", desc: "ç¥æˆ¶è’™ç‰¹åˆ©é…’åº—", address: "Hotel Monterey Kobe" },
                    { 
                    type: 'food', 
                    time: "12:00", 
                    title: "åˆé¤ï¼šKobe Beef Steak Sakura", 
                    desc: "ç¥æˆ¶ç‰›æ’é«”é©—ï¼Œæä¾›é«˜å“è³ª A5 ç¥æˆ¶ç‰›ã€‚",
                    subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šåˆé¤å¥—é¤ç´„ Â¥5,000 ~ Â¥8,000\nğŸ“ åœ°å€ï¼šç¥æˆ¶å¸‚ä¸­å¤®å€ä¸‹å±±æ‰‹é€š2-17-10 (2F)\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š11:30-14:00; 17:00-21:00\nğŸš¶ äº¤é€šï¼šå¾è’™ç‰¹åˆ©é…’åº—æ­¥è¡Œç´„ 2 åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šè¿‘é£¯åº—ï¼Œè£æ½¢å…¸é›…ï¼Œåˆé–“å¥—é¤ CP å€¼é«˜ã€‚",
                    tags: ["å¿…åƒ", "ç¥æˆ¶ç‰›"],
                    address: "2 Chome-17-10 Shimoyamatedori, Kobe" 
                    },
                    { 
                        type: 'spot', 
                        time: "14:00", 
                        title: "ç¥æˆ¶æ¸¯æ•£ç­–", 
                        desc: "è‡¨æµ·æ¨‚åœ’ã€é¦¬è³½å…‹å»£å ´è‡ªç”±æ´»å‹•ã€‚", 
                        subDesc: "ğŸ“ åœ°é»ï¼šKobe Harborland\nğŸ’¡ äº®é»ï¼šç´…ç£šå€‰åº«ã€éºµåŒ…è¶…äººåšç‰©é¤¨ã€é¦¬è³½å…‹å¤§æ‘©å¤©è¼ªã€‚\nğŸš¶ äº¤é€šï¼šå¾ä¸‰å®®æ­ JR åˆ°ç¥æˆ¶ç«™ï¼Œæ­¥è¡Œ 5 åˆ†é˜ã€‚",
                        address: "Kobe Harborland",
                        detailedGuide: {
                            title: "ç§»å‹•æ”»ç•¥ï¼šå‰å¾€è‡¨æµ·æ¨‚åœ’",
                            strategy: "æ­¥è¡Œ + JR ç¥æˆ¶ç·š (ç´„ 25 åˆ†é˜)",
                            steps: [
                                { icon: "Footprints", title: "Step 1: æ­¥è¡Œè‡³ JR ä¸‰ä¹‹å®®ç«™ (ç´„ 8 åˆ†)", desc: "å¾é¤å»³æ²¿ç†±é¬§çš„ç”Ÿç”°è·¯å¾€è»Šç«™æ–¹å‘èµ°ã€‚\nğŸ¯ ç›®æ¨™ï¼šJR ä¸‰ä¹‹å®®ç«™ã€Œè¥¿å£ã€æˆ–ã€Œä¸­å¤®å£ã€ã€‚" },
                                { icon: "Train", title: "Step 2: æ­ä¹˜ JR ç¥æˆ¶ç·š (ç´„ 4 åˆ†)", desc: "âœ… èµ·é»ï¼šJR ä¸‰ä¹‹å®® â†’ ğŸ çµ‚é»ï¼šJR ç¥æˆ¶ç«™ (Kobe Station)ã€‚\nâš ï¸ æ³¨æ„ï¼šè«‹åœ¨ã€Œç¥æˆ¶ç«™ã€ä¸‹è»Š (ä¸æ˜¯æ–°ç¥æˆ¶/ç¥æˆ¶ä¸‰å®®)ã€‚\nğŸš„ æ–¹å‘ï¼šå¾€å§¬è·¯ã€è¥¿æ˜çŸ³ã€‚è»Šç¨®çš†å¯æ­ (æ–°å¿«é€Ÿ/å¿«é€Ÿ/æ™®é€š)ã€‚" },
                                { icon: "MapPin", title: "Step 3: æ­¥è¡Œè‡³è‡¨æµ·æ¨‚åœ’", desc: "JR ç¥æˆ¶ç«™ã€Œä¸­å¤®å£ã€å‡ºç«™ã€‚\nğŸ‘‰ è·Ÿéš¨ã€ŒHarborlandã€æˆ–ã€Œumieã€æŒ‡æ¨™ï¼Œç¶“åœ°ä¸‹è¡— (Duo Kobe) ç›´é€šé¦¬è³½å…‹å»£å ´ã€‚" }
                            ]
                        },
                        attractions: [
                            { label: "æ™¯é»", text: "ç¥æˆ¶ç…‰ç“¦å€‰åº« (Kobe Brick Warehouse)" },
                            { label: "æ•£æ­¥", text: "ç¾åˆ©å …å…¬åœ’ (Meriken Park)" },
                            { label: "é€›è¡—", text: "Mosaic é¦¬è³½å…‹å»£å ´ & éºµåŒ…è¶…äºº\n(æ¨è–¦ï¼š2F å‰åœåŠ›å…±å’Œåœ‹ã€å²åŠªæ¯”å°ˆè³£åº—)" },
                            { label: "å¿…æ‹", text: "æ„›ä¹‹éƒµç­’ (Love's Postbox) - éƒµå±€æ—ç²‰ç´…è‰²éƒµç­’" }
                        ]
                    },
                    { 
                        type: 'spot', 
                        time: "15:45", 
                        title: "ç¥æˆ¶å”å¥æ›²è™Ÿ (Concerto) éŠèˆ¹é«”é©—", 
                        desc: "äº«å—ç¥æˆ¶æ¸¯çš„æµªæ¼«å¤•é™½èˆ‡åƒè¬å¤œæ™¯ã€‚", 
                        tags: ["æµªæ¼«", "å¤œæ™¯"],
                        detailedGuide: {
                            title: "éŠèˆ¹è¡Œç¨‹è¡¨",
                            strategy: "æµªæ¼«å¤•é™½èˆ‡å¤œæ™¯",
                            steps: [
                                { icon: "Footprints", title: "15:45 - 16:00 | å‰å¾€æ«ƒå°", desc: "æ…¢æ…¢èµ°åˆ° Mosaic 1 æ¨“çš„ Concerto (å”å¥æ›²è™Ÿ) æ«ƒå°æº–å‚™å ±åˆ°ã€‚" },
                                { icon: "Ticket", title: "16:00 | å ±åˆ°", desc: "æ›å–ç™»èˆ¹è­‰" },
                                { icon: "Ship", title: "16:30 - 18:15 | å‡ºèˆª", desc: "ğŸš¢ ç¥æˆ¶å”å¥æ›²è™Ÿ (Concerto) éŠæµ·" },
                                { icon: "Camera", title: "18:15 - 18:30 | ä¸‹èˆ¹", desc: "ä¸‹èˆ¹ & æ‹æ”æ¸¯ç£å¤œæ™¯" }
                            ]
                        }
                    },
                    { 
                        type: 'food', 
                        time: "18:30", 
                        title: "æ™šé¤ï¼šå•†å ´è¦“é£Ÿ (Mosaic / Umie)", 
                        desc: "çµæŸéŠèˆ¹å¾Œï¼Œç›´æ¥åœ¨ Mosaic é¦¬è³½å…‹å»£å ´æˆ– Umie è³¼ç‰©ä¸­å¿ƒäº«ç”¨æ™šé¤ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,500 ~ Â¥3,000\nğŸ“ åœ°é»ï¼šMosaic å»£å ´ 2F/3F\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼šè‡³ 22:00\nğŸ’¡ æ¨è–¦ï¼šEggs 'n Things (é¬†é¤…)ã€Fisherman's Market (æµ·é®®è‡ªåŠ©)ã€‚",
                        tags: ["è‡ªç”±é£Ÿ", "æ™¯è§€é¤å»³"],
                        address: "Kobe Harborland umie Mosaic" 
                    },
                    { 
                        type: 'spot', 
                        time: "19:00", 
                        title: "ç¥æˆ¶æ¸¯å¡”", 
                        desc: "æ¬£è³ç¥æˆ¶åƒè¬å¤œæ™¯",
                        subDesc: "ğŸ“ åœ°å€ï¼šæ—¥æœ¬ã€’650-0042 Hyogo, Kobe, Chuo Ward, Hatobacho, 5-5\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š09:00-23:00 (â€»æœ€å¾Œå…¥å ´æ™‚é–“ç‚ºæ™šä¸Š10æ™‚åŠ)",
                        attractions: [
                            { label: "é–€ç¥¨ (å±•æœ›å±¤+å±‹é ‚)", text: "æˆäºº 1,200æ—¥åœ“ (é«˜ä¸­ç”ŸåŠä»¥ä¸Š)" },
                            { label: "é–€ç¥¨ (åƒ…å±•æœ›å±¤)", text: "æˆäºº 1,000æ—¥åœ“ (é«˜ä¸­ç”ŸåŠä»¥ä¸Š)" }
                        ],
                        address: "Kobe Port Tower" 
                    },
                    { 
                        type: 'transport', 
                        time: "20:30", 
                        title: "è¿”å›é£¯åº—", 
                        desc: "æ­ä¹˜è¨ˆç¨‹è»Š",
                        subDesc: "äº¤é€šæ–¹å¼ï¼šç›´æ¥æ””è»Šæˆ–ä½¿ç”¨ Uber / GO App è¿”å›è’™ç‰¹åˆ©é…’åº—",
                        icon: "Car" 
                    }
                ]
                },
                {
                day: 6,
                date: "1/16 (äº”)",
                location: "ç¥æˆ¶",
                weather: "æ™´æœ— 7Â°C",
                events: [
                    { 
                        type: 'food', 
                        time: "09:00", 
                        title: "æ—©é¤ï¼šNishimura's Coffee", 
                        desc: "75å¹´æ­·å²å¾·å¼å’–å•¡å»³ (ä¸­å±±æ‰‹æœ¬åº—)ï¼Œç¥æˆ¶å’–å•¡æ–‡åŒ–çš„ä»£è¡¨ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,000 ~ Â¥1,500\nğŸ“ åœ°å€ï¼šç¥æˆ¶å¸‚ä¸­å¤®å€ä¸­å±±æ‰‹é€š1-26-3\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š08:30-23:00\nğŸš¶ äº¤é€šï¼šå¾è’™ç‰¹åˆ©é…’åº—æ­¥è¡Œç´„ 7 åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šå¿…é»æ—©é¤å¥—é¤ï¼Œæ„Ÿå—ç¥æˆ¶çš„è€æ´¾å„ªé›…ã€‚",
                        tags: ["è€æ´¾æµªæ¼«", "äººæ°£æ—©é¤"],
                        address: "1 Chome-26-3 Nakayamatedori, Kobe" 
                    },
                    { 
                        type: 'spot', 
                        time: "10:15", 
                        title: "åŒ—é‡å¤©æ»¿å®®", 
                        desc: "ä¾›å¥‰å­¸å•ä¹‹ç¥ï¼Œå¯ä¿¯ç°é¢¨è¦‹é›ä¹‹é¤¨ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šåŒ—é‡ç”º3-12\nğŸš¶ äº¤é€šï¼šèµ°è·¯å¾ Nishimura's Coffee åˆ°å¤©æ»¿å®®ç´„ 12 åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šçˆ¬ä¸Šéšæ¢¯å¾Œçš„è¦–é‡æ¥µä½³ï¼Œå¯çœ‹è¦‹ç¥æˆ¶å¸‚æ™¯ã€‚",
                        tags: ["å­¸å•ä¹‹ç¥", "çµ•ä½³è¦–é‡"],
                        address: "Kitano Tenmangu Shrine" 
                    },
                    { 
                        type: 'spot', 
                        time: "10:45", 
                        title: "åŒ—é‡ç•°äººé¤¨è¡—", 
                        desc: "æ˜æ²»æ™‚ä»£çš„å¤–åœ‹äººä½å®…å€ã€‚", 
                        address: "Kitano Ijinkan-gai",
                        subDesc: "â€» è©³ç´°ç¥¨åƒ¹è³‡è¨Šè«‹åƒè¦‹ã€Œè³‡è¨Šã€é é¢",
                        attractions: [
                            { label: "å¿…å»", text: "ç™¾å¹´æ˜Ÿå·´å…‹ (Starbucks Kobe Kitano Ijinkan)\næ—¥æœ¬ç™»éŒ„æœ‰å½¢æ–‡åŒ–è²¡ï¼Œæ´‹å¼æœ¨é€ å»ºç¯‰ï¼Œå¿…è¨ªæ‰“å¡é»ã€‚" },
                            { label: "å¿…è²·ä¼´æ‰‹ç¦®", text: "1. é¢¨è¦‹é›æœ¬èˆ–ï¼šçƒ¤èµ·å¸å¸ƒä¸\n2. å…­ç”²ç‰§å ´ï¼šéœœæ·‡æ·‹ã€ç‰›å¥¶å†°æ·‡æ·‹ã€ä¹³é…ªè›‹ç³•\n3. ç¥æˆ¶ Frantzï¼šé­”æ³•ä¹‹å£ºå¸ƒä¸\n4. ç¥æˆ¶é¢¨æœˆå ‚ï¼šæ³•è˜­é…¥" }
                        ],
                        detailedGuide: {
                            title: "ç•°äººé¤¨åƒè§€æ”»ç•¥",
                            strategy: "æ•£æ­¥ + åƒè§€å¥—ç¥¨",
                            steps: [
                                { icon: "Footprints", title: "äº¤é€šæ–¹å¼", desc: "å¾åŒ—é‡å¤©æ»¿å®®æ­¥è¡Œç´„ 2 åˆ†é˜å³å¯æŠµé”ä¸»è¦è¡—é“ã€‚" },
                                { icon: "Ticket", title: "è³¼ç¥¨è³‡è¨Š", desc: "å»ºè­°è³¼è²·ã€Œå¥—ç¥¨ (Pass)ã€è¼ƒåˆ’ç®—ã€‚\næ¨è–¦ï¼š3é¤¨åˆ¸ (é¢¨è¦‹é›+èŒé»ƒ+é­šé±—) æˆ– å…©é¤¨åˆ¸ (é¢¨è¦‹é›+èŒé»ƒ)ã€‚\nè³¼ç¥¨è™•ï¼šå„é¤¨å…¥å£æˆ–åŒ—é‡è§€å…‰æ¡ˆå…§æ‰€ã€‚" },
                                { icon: "Landmark", title: "å¿…è¨ªï¼šé¢¨è¦‹é›ä¹‹é¤¨ (Kazamidori)", desc: "ç´…è‰²ç£šç“¦èˆ‡å±‹é ‚çš„é¢¨è¦‹é›æ˜¯åŒ—é‡çš„è±¡å¾µ (åœ‹å®¶é‡è¦æ–‡åŒ–è²¡)ã€‚" },
                                { icon: "Landmark", title: "å¿…è¨ªï¼šèŒé»ƒä¹‹é¤¨ (Moegi)", desc: "æ·¡ç¶ è‰²å¤–ç‰†çš„æœ¨é€ å»ºç¯‰ï¼Œæ›¾æ˜¯ç¾åœ‹ç¸½é ˜äº‹å®˜é‚¸ã€‚" },
                                { icon: "Landmark", title: "å¿…è¨ªï¼šé­šé±—ä¹‹å®¶ (Uroko)", desc: "å¤–ç‰†è²¼æ»¿å¤©ç„¶çŸ³æ¿åƒé­šé±—ä¸€æ¨£ï¼Œæ“šèªªæ‘¸äº†æœƒå¸¶ä¾†å¥½é‹ã€‚" }
                            ]
                        }
                    },
                    { 
                        type: 'food', 
                        time: "12:30", 
                        title: "åˆé¤ï¼šKobe IJINKAN-YA", 
                        desc: "ä½æ–¼åŒ—é‡å€åŸŸçš„å¾©å¤æ´‹é£Ÿé¤å»³ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,500 ~ Â¥2,500\nğŸ“ åœ°å€ï¼šç¥æˆ¶å¸‚ä¸­å¤®å€åŒ—é‡ç”º3-4-26\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š10:00-18:00\nğŸ’¡ ç‰¹è‰²ï¼šæ¨è–¦æ¼¢å ¡æ’ã€è›‹åŒ…é£¯ã€‚",
                        address: "3 Chome-4-26 Kitanocho, Kobe" 
                    },
                    { 
                        type: 'shopping', 
                        time: "14:30", 
                        title: "Center Plaza (ã‚»ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¶)", 
                        desc: "ç¥æˆ¶çš„å‹•æ¼«è–åœ°ï¼Œå…¬ä»”æ¨¡å‹é›†ä¸­åœ°ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šä¸‰å®®ç”º1-9-1 (è¥¿é¤¨2F/3F)\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š11:00-19:00 (ä¾åº—å®¶è€Œç•°)\nğŸš¶ äº¤é€šï¼šå¾ç•°äººé¤¨å€æ­¥è¡Œæˆ–æ­ä¹˜ City Loop å·´å£«è‡³ä¸‰å®®\nğŸ’¡ ç‰¹è‰²ï¼šç¥æˆ¶ç‰ˆç§‹è‘‰åŸï¼ŒAnimateã€Lashinbang éƒ½åœ¨é€™ã€‚",
                        tags: ["å‹•æ¼«", "é›»ç©", "å¾¡å®…è–åœ°"],
                        address: "Center Plaza Kobe" 
                    },
                    { 
                        type: 'shopping', 
                        time: "16:00", 
                        title: "ç¥æˆ¶é˜ªæ€¥ç™¾è²¨", 
                        desc: "è³¼è²·ç¥æˆ¶é™å®šç”œé»èˆ‡ä¼´æ‰‹ç¦®ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šå°é‡æŸ„é€š8-1-8\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š10:00-20:00\nğŸš¶ äº¤é€šï¼šå¾Center Plazaæ­¥è¡Œç´„3åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šB1 ç”œé»è¡—å¿…é€›ï¼Œé›†çµå„å¤§ç¥æˆ¶ååº—ã€‚",
                        tags: ["ç™¾è²¨å…¬å¸", "ä¼´æ‰‹ç¦®"],
                        address: "Kobe Hankyu" 
                    },
                    { 
                        type: 'food', 
                        time: "18:00", 
                        title: "æ™šé¤ï¼šKobesteak Propeller", 
                        desc: "é«˜å“è³ªç¥æˆ¶ç‰›æ’èˆ‡æ´‹é£Ÿï¼ŒCPå€¼é«˜ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥3,000 ~ Â¥6,000\nğŸ“ åœ°å€ï¼šç£¯ä¸Šé€š8-1-14\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š11:00-14:30, 17:00-21:00\nğŸš¶ äº¤é€šï¼šç”±é˜ªæ€¥æ­¥è¡Œç´„3åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šä¸æƒ³èŠ±å¤§éŒ¢åƒç¥æˆ¶ç‰›çš„é¦–é¸ï¼Œå¥—é¤é™„é¤è±å¯Œã€‚",
                        tags: ["éœ€é è¨‚", "ç¥æˆ¶ç‰›", "äººæ°£åº—"],
                        address: "8 Chome-1-14 Isogamidori, Kobe" 
                    }
                ]
                },
                {
                day: 7,
                date: "1/17 (å…­)",
                location: "ç¥æˆ¶",
                weather: "å¤šé›² 6Â°C",
                events: [
                    { 
                        type: 'spot', 
                        time: "09:00", 
                        title: "ç”Ÿç”°ç¥ç¤¾", 
                        desc: "ç¥æˆ¶åœ°åçš„ç”±ä¾†ï¼Œå¤è€ç¥ç¤¾ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šä¸‹å±±æ‰‹é€š1-2-1\nğŸ’¡ ç‰¹è‰²ï¼šä¸»ç¥€æˆ€æ„›èˆ‡å§»ç·£ï¼Œæ°´å åœå¿…ç©ã€‚",
                        tags: ["æˆ€æ„›çµç·£", "èƒ½é‡æ™¯é»"],
                        address: "1 Chome-2-1 Shimoyamatedori, Chuo Ward, Kobe" 
                    },
                    { 
                        type: 'food', 
                        time: "10:30", 
                        title: "æ—©åˆé¤ï¼šBRISK STAND", 
                        desc: "IGçˆ†ç´…çš„ã€Œåˆ‡å°åŠæ¼¢å ¡ã€ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥1,500 ~ Â¥2,500\nğŸ“ åœ°å€ï¼šå…ƒç”ºé€š5-4-8\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼šå¹³æ—¥ 10:30~16:30 / é€±æœ« 10:30~18:30\nğŸš¶ äº¤é€šæ–¹å¼ï¼šå¾ç”Ÿç”°ç¥ç¤¾æ­¥è¡Œç´„ 13 åˆ†é˜\nğŸ’¡ ç‰¹è‰²ï¼šå…ˆç…®å¾Œçƒ¤çš„æ¼¢å ¡æ’ï¼Œå°åˆ‡æ–·é¢ç§€è¶…å¸ç›ã€‚",
                        tags: ["IGç†±é–€", "æ¼¢å ¡ååº—"],
                        address: "5 Chome-4-8 Motomachidori, Kobe" 
                    },
                    { 
                        type: 'shopping', 
                        time: "12:00", 
                        title: "ç¥æˆ¶ä¸‰ç”° Premium Outlets", 
                        desc: "è¥¿æ—¥æœ¬æœ€å¤§ç´šOutletï¼Œåº—èˆ–æ•¸è¶…é200å®¶ã€‚", 
                        subDesc: "ğŸ“ åœ°å€ï¼šç¥æˆ¶å¸‚åŒ—å€ä¸Šæ´¥å°7-3\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š10:00-20:00\nğŸ’¡ ç‰¹è‰²ï¼šåœ‹éš›ç²¾å“ã€é‹å‹•å“ç‰Œé½Šå…¨ï¼Œæ—é‚Šæœ‰ Aeon Mallã€‚",
                        address: "Kobe-Sanda Premium Outlets",
                        detailedGuide: {
                            title: "äº¤é€šæ”»ç•¥ï¼šå‰å¾€ä¸‰ç”° Outlet",
                            strategy: "ç›´é”ç‰¹æ€¥å·´å£« (ç´„ 50 åˆ†é˜)",
                            steps: [
                                { icon: "Footprints", title: "Step 1: æ­¥è¡Œè‡³ç¥å§¬å·´å£«ç¸½ç«™", desc: "ä½ç½®ï¼šJR ä¸‰å®®ç«™æ±å£é«˜æ¶æ©‹ä¸‹ã€‚" },
                                { icon: "Ticket", title: "Step 2: è³¼ç¥¨èˆ‡æ­è»Š", desc: "ğŸšŒ è·¯ç·šï¼šç‰¹æ€¥å·´å£«ã€Œä¸‰å®®ï½ä¸‰ç”° Premium Outlets ç·šã€ã€‚\nğŸ’° è²»ç”¨ï¼šå–®ç¨‹ç´„ 670 æ—¥åœ“ã€‚" }
                            ]
                        }
                    },
                    { 
                        type: 'food', 
                        time: "18:00", 
                        title: "æ™šé¤ï¼šUnagi Kikugawa (ä¸€æœ¬é°»)", 
                        desc: "ä¾†è‡ªåå¤å±‹çš„90å¹´è€åº—ï¼Œç¾æ®ºç¾çƒ¤ã€‚", 
                        subDesc: "ğŸ’° å¹³å‡é ç®—ï¼šç´„ Â¥4,000 ~ Â¥6,000\nğŸ“ åœ°å€ï¼šåŠ ç´ç”º4-8-17 (Iconic Kobe 1F)\nâ° ç‡Ÿæ¥­æ™‚é–“ï¼š12:00-15:00, 17:00-22:00\nğŸ’¡ ç‰¹è‰²ï¼šæ•´å°¾é°»é­šä¸åˆ‡æ®µç›´æ¥çƒ¤ï¼Œå¤–çš®é…¥è„†è‚‰è³ªè»Ÿå«©ã€‚",
                        tags: ["ç±³å…¶æ—æ¨è–¦", "é°»é­šé£¯"],
                        address: "4 Chome-8-17 Kanocho, Kobe" 
                    }
                ]
                },
                {
                day: 8,
                date: "1/18 (æ—¥)",
                location: "è¿”ç¨‹",
                weather: "æ™´æœ— 9Â°C",
                events: [
                    { type: 'transport', time: "æ—©æ™¨", title: "å‰å¾€æ©Ÿå ´", desc: "æ­ä¹˜è¨ˆç¨‹è»Šæˆ– Port Liner å‰å¾€ç¥æˆ¶æ©Ÿå ´" },
                    { type: 'flight', time: "13:30", title: "è¿”ç¨‹èˆªç­", desc: "UKB -> RMQ" }
                ]
                }
            ]
        };

        // --- UI å…ƒä»¶ ---

        const Tag = ({ text, color = "bg-orange-100 text-orange-800" }) => (
            <span className={`text-[10px] px-2 py-1 rounded-full mr-1 ${color} font-medium tracking-wide whitespace-nowrap`}>
                {text}
            </span>
        );

        const NavButton = ({ address, className = "" }) => {
            if (!address) return null;
            const handleNav = (e) => {
                e.stopPropagation();
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`, '_blank');
            };
            return (
                <button onClick={handleNav} className={`flex items-center gap-1 bg-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-sm active:scale-95 transition-transform ${className}`}>
                    <Navigation size={12} /><span>å°èˆª</span>
                </button>
            );
        };

        const InfoCard = ({ icon: Icon, title, content, subContent, image }) => (
            <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-4 overflow-hidden">
                {image && (
                    <div className="h-48 -mx-5 -mt-5 mb-4 overflow-hidden relative">
                        <img src={image} alt={title} className="w-full h-full object-cover" />
                    </div>
                )}
                <div className="flex gap-4 items-start">
                    <div className="bg-stone-50 p-3 rounded-xl shrink-0">
                        <Icon className="text-stone-600" size={24} />
                    </div>
                    <div className="flex-1">
                        <h3 className="text-xs text-stone-400 font-bold uppercase tracking-wider mb-1">{title}</h3>
                        <div className="text-stone-800 font-bold text-lg leading-tight mb-1">{content}</div>
                        {subContent && <div className="text-stone-500 text-sm">{subContent}</div>}
                    </div>
                </div>
            </div>
        );

        // è¨˜å¸³å…ƒä»¶ - æ”¯æ´æœ¬åœ°å„²å­˜ fallback
        const AccountingTab = ({ db, isOfflineMode }) => {
            const [items, setItems] = useState([]);
            const [newItem, setNewItem] = useState({ name: '', price: '', payer: 'å…¬è²»' });
            const [loading, setLoading] = useState(false);
            const [errorMsg, setErrorMsg] = useState(null);

            useEffect(() => {
                if (isOfflineMode) {
                    // é›¢ç·šæ¨¡å¼ï¼šè®€å– Local Storage
                    try {
                        const localData = localStorage.getItem('expenses');
                        if (localData) {
                            setItems(JSON.parse(localData));
                        }
                    } catch (e) {
                        console.error("Local storage read error", e);
                    }
                    return;
                }

                if (!db) {
                    setErrorMsg("ç„¡æ³•é€£æ¥è³‡æ–™åº«ï¼Œè«‹æª¢æŸ¥è¨­å®šã€‚");
                    return;
                }
                
                try {
                    const q = query(collection(db, "expenses"), orderBy("timestamp", "desc"));
                    const unsubscribe = onSnapshot(q, (snapshot) => {
                        const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        setItems(data);
                    }, (error) => {
                        console.error("Firestore snapshot error:", error);
                        // å¦‚æœåœ¨ç›£è½æ™‚æ–·ç·šï¼Œä¹Ÿåˆ‡æ›é¡¯ç¤ºæœ¬åœ°è³‡æ–™ (å”¯è®€) æˆ–æç¤ºéŒ¯èª¤
                        setErrorMsg("è®€å–é›²ç«¯è³‡æ–™å¤±æ•—ï¼š" + error.message);
                    });
                    return () => unsubscribe();
                } catch (err) {
                    console.error("Error setting up listener:", err);
                }
            }, [db, isOfflineMode]);

            const handleAdd = async (e) => {
                e.preventDefault();
                if (!newItem.name || !newItem.price) return;
                setLoading(true);

                const newExpense = {
                    ...newItem,
                    price: Number(newItem.price),
                    timestamp: isOfflineMode ? new Date().toISOString() : serverTimestamp()
                };

                try {
                    if (isOfflineMode) {
                        // é›¢ç·šæ¨¡å¼ï¼šå¯«å…¥ Local Storage
                        const newItems = [{ id: Date.now().toString(), ...newExpense }, ...items];
                        setItems(newItems);
                        localStorage.setItem('expenses', JSON.stringify(newItems));
                    } else {
                        // ç·šä¸Šæ¨¡å¼ï¼šå¯«å…¥ Firebase
                        await addDoc(collection(db, "expenses"), newExpense);
                    }
                    setNewItem({ name: '', price: '', payer: 'å…¬è²»' });
                } catch (error) {
                    console.error("æ–°å¢å¤±æ•—: " + error.message);
                    alert("æ–°å¢å¤±æ•—: " + error.message);
                }
                setLoading(false);
            };

            const handleDelete = async (id) => {
                // ç§»é™¤ confirm é¿å… UI é˜»æ“‹
                try {
                    if (isOfflineMode) {
                        // é›¢ç·šæ¨¡å¼ï¼šåˆªé™¤ Local Storage
                        const newItems = items.filter(item => item.id !== id);
                        setItems(newItems);
                        localStorage.setItem('expenses', JSON.stringify(newItems));
                    } else {
                        // ç·šä¸Šæ¨¡å¼ï¼šåˆªé™¤ Firebase
                        await deleteDoc(doc(db, "expenses", id));
                    }
                } catch (e) {
                    console.error("åˆªé™¤å¤±æ•—", e);
                }
            };

            const total = items.reduce((sum, item) => sum + (item.price || 0), 0);

            if (errorMsg && !isOfflineMode) {
                return (
                    <div className="pt-10 px-6 text-center">
                        <div className="bg-red-50 text-red-600 p-4 rounded-xl border border-red-200">
                            <AlertTriangle className="mx-auto mb-2" />
                            <p className="font-bold mb-2">ç„¡æ³•ä½¿ç”¨è¨˜å¸³åŠŸèƒ½</p>
                            <p className="text-sm">{errorMsg}</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="pt-4 pb-20 animate-fade-in">
                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-stone-100 mb-6">
                        <div className="text-center mb-6">
                            <h2 className="text-stone-400 text-xs font-bold uppercase tracking-widest mb-1">ç¸½æ”¯å‡º (æ—¥åœ“)</h2>
                            <div className="text-4xl font-bold text-stone-800">Â¥ {total.toLocaleString()}</div>
                            {isOfflineMode && <div className="text-xs text-amber-600 mt-1 flex items-center justify-center gap-1"><Save size={12}/> è³‡æ–™å„²å­˜æ–¼æœ¬æ©Ÿ</div>}
                        </div>

                        <form onSubmit={handleAdd} className="space-y-3">
                            <input 
                                type="text" 
                                placeholder="é …ç›®åç¨± (ä¾‹å¦‚: ç« é­šç‡’)" 
                                value={newItem.name}
                                onChange={e => setNewItem({...newItem, name: e.target.value})}
                                className="w-full p-3 bg-stone-50 rounded-xl border border-stone-200 focus:border-stone-400 outline-none text-sm"
                            />
                            <div className="flex gap-2">
                                <input 
                                    type="number" 
                                    placeholder="é‡‘é¡" 
                                    value={newItem.price}
                                    onChange={e => setNewItem({...newItem, price: e.target.value})}
                                    className="w-2/3 p-3 bg-stone-50 rounded-xl border border-stone-200 focus:border-stone-400 outline-none text-sm"
                                />
                                <select 
                                    value={newItem.payer}
                                    onChange={e => setNewItem({...newItem, payer: e.target.value})}
                                    className="w-1/3 p-3 bg-stone-50 rounded-xl border border-stone-200 text-sm"
                                >
                                    <option>å…¬è²»</option>
                                    <option>å€‹äºº</option>
                                </select>
                            </div>
                            <button 
                                type="submit" 
                                disabled={loading}
                                className="w-full bg-stone-800 text-white py-3 rounded-xl font-bold active:scale-95 transition-transform flex justify-center items-center gap-2"
                            >
                                {loading ? <div className="loader w-4 h-4 border-white border-t-transparent"></div> : <Plus size={18} />}
                                æ–°å¢ç´€éŒ„
                            </button>
                        </form>
                    </div>

                    <div className="space-y-3">
                        {items.map(item => (
                            <div key={item.id} className="bg-white p-4 rounded-xl shadow-sm border border-stone-100 flex justify-between items-center">
                                <div>
                                    <div className="font-bold text-stone-800">{item.name}</div>
                                    <div className="text-xs text-stone-400">{item.payer} â€¢ {isOfflineMode ? new Date(item.timestamp).toLocaleDateString() : item.timestamp?.toDate().toLocaleDateString()}</div>
                                </div>
                                <div className="flex items-center gap-3">
                                    <span className="font-mono font-bold text-stone-700">Â¥{item.price.toLocaleString()}</span>
                                    <button onClick={() => handleDelete(item.id)} className="text-stone-300 hover:text-red-500">
                                        <Trash2 size={16} />
                                    </button>
                                </div>
                            </div>
                        ))}
                        {items.length === 0 && (
                            <div className="text-center text-stone-400 text-sm py-10">
                                å°šæœªæœ‰è¨˜å¸³ç´€éŒ„
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // äº¤é€šå¡ç‰‡å…ƒä»¶
        const TransportGuideCard = ({ guide, isEmbedded = false }) => (
            <div className={`bg-white rounded-2xl overflow-hidden ${isEmbedded ? 'mt-4 border border-stone-200 shadow-sm' : 'shadow-sm border border-stone-100 mb-6'}`}>
                <div className="bg-stone-800 p-4 text-white">
                    <h3 className="font-bold text-base md:text-lg">{guide.title || "ç§»å‹•æ”»ç•¥"}</h3>
                    <div className="flex items-center gap-1 text-stone-300 text-xs mt-1">
                        <Train size={14} /><span>{guide.strategy}</span>
                    </div>
                </div>
                <div className="p-4 space-y-4 bg-stone-50/50">
                    {guide.steps.map((step, idx) => {
                        const StepIcon = getIcon(step.icon); // ä½¿ç”¨ getIcon å‡½å¼
                        return (
                            <div key={idx} className="flex gap-4 items-start relative pb-4 last:pb-0">
                                {idx !== guide.steps.length - 1 && <div className="absolute left-[19px] top-8 bottom-0 w-0.5 bg-stone-200"></div>}
                                <div className="z-10 bg-indigo-50 text-indigo-600 p-2 rounded-full shrink-0 border-2 border-white shadow-sm">
                                    <StepIcon size={16} />
                                </div>
                                <div>
                                    <h4 className="font-bold text-stone-800 text-sm mb-1">{step.title}</h4>
                                    <p className="text-xs text-stone-600 leading-relaxed whitespace-pre-line">{step.desc}</p>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        );

        // Day Card
        const DayCard = ({ dayData, isExpanded, onToggle }) => (
            <div className="mb-4 rounded-3xl overflow-hidden bg-white shadow-sm border border-stone-100 transition-all duration-300">
                <div onClick={onToggle} className={`p-5 flex items-center justify-between cursor-pointer active:bg-stone-50 ${isExpanded ? 'bg-stone-800 text-white' : 'bg-white text-stone-800'}`}>
                    <div>
                        <div className={`text-xs font-bold tracking-widest uppercase mb-1 text-stone-400`}>DAY {dayData.day}</div>
                        <h2 className="text-xl font-bold">{dayData.date}</h2>
                    </div>
                    <div className="flex items-center gap-3">
                        <div className={`flex items-center gap-1 text-xs px-2 py-1 rounded-full ${isExpanded ? 'bg-stone-700 text-stone-200' : 'bg-stone-100 text-stone-600'}`}>
                            <CloudSun size={14} />{dayData.weather}
                        </div>
                        {isExpanded ? <ChevronUp /> : <ChevronDown />}
                    </div>
                </div>
                {isExpanded && (
                    <div className="p-4 bg-stone-50 space-y-4">
                        {dayData.events.map((event, idx) => {
                            let Icon = MapPin;
                            let themeClass = "border-l-4 border-stone-300";
                            if (event.type === 'food') { Icon = Utensils; themeClass = "border-l-4 border-orange-300"; }
                            if (event.type === 'transport') { Icon = Train; themeClass = "border-l-4 border-blue-300"; }
                            if (event.type === 'shopping') { Icon = ShoppingBag; themeClass = "border-l-4 border-pink-300"; }
                            if (event.type === 'flight') { Icon = Plane; themeClass = "border-l-4 border-sky-300"; }
                            if (event.type === 'hotel') { Icon = BedDouble; themeClass = "border-l-4 border-indigo-300"; }
                            if (event.type === 'spot') { Icon = Camera; }
                            
                            // ğŸ”¥ ä¿®æ­£ï¼šå¾å­—ä¸²åç¨±è¼‰å…¥å°æ‡‰åœ–ç¤º
                            if (event.icon) { 
                                Icon = getIcon(event.icon); 
                            }
                            
                            return (
                                <div key={idx} className={`bg-white p-4 rounded-xl shadow-sm ${themeClass} relative group`}>
                                    <div className="flex justify-between items-start mb-2">
                                        <div className="flex items-center gap-2 text-stone-500 text-xs font-mono">
                                            <Icon size={14} /><span>{event.time}</span>
                                        </div>
                                        {event.address && <NavButton address={event.address} />}
                                    </div>
                                    <h3 className="font-bold text-stone-800 text-lg mb-1">{event.title}</h3>
                                    <div className="flex flex-wrap gap-2 mb-2">
                                        {event.tags?.map(t => <Tag key={t} text={t} color={t.includes("å¿…") ? "bg-red-100 text-red-800" : "bg-stone-100 text-stone-600"} />)}
                                    </div>
                                    <p className="text-stone-600 text-sm whitespace-pre-line leading-relaxed">{event.desc}</p>
                                    {event.subDesc && <div className="mt-2 text-xs text-stone-500 whitespace-pre-line bg-stone-50 p-2 rounded border border-stone-100">{event.subDesc}</div>}
                                    {event.attractions && (
                                        <div className="mt-4 grid gap-2">
                                            {event.attractions.map((attr, i) => (
                                                <div key={i} className="flex gap-2 items-start bg-stone-50 p-2 rounded-lg border border-stone-100">
                                                    <span className="shrink-0 bg-stone-200 text-stone-700 text-[10px] px-2 py-0.5 rounded font-bold">{attr.label}</span>
                                                    <span className="text-xs text-stone-700 whitespace-pre-line">{attr.text}</span>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                    {event.detailedGuide && <TransportGuideCard guide={event.detailedGuide} isEmbedded={true} />}
                                    {event.isImportant && (
                                        <div className="mt-3 bg-amber-50 p-3 rounded-lg border border-amber-100 flex gap-2">
                                            <Info className="text-amber-500 shrink-0" size={16} />
                                            <span className="text-xs text-amber-800 font-medium">è«‹ç‰¹åˆ¥æ³¨æ„æ­¤æ®µäº¤é€šæŒ‡ç¤º</span>
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>
                )}
            </div>
        );

        // ä¸»ç¨‹å¼
        const App = () => {
            const [tripData, setTripData] = useState(null);
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [password, setPassword] = useState('');
            const [authError, setAuthError] = useState(false);
            const [activeTab, setActiveTab] = useState('itinerary');
            const [expandedDay, setExpandedDay] = useState(1);
            const [isUploading, setIsUploading] = useState(false);
            const [dbError, setDbError] = useState(null); // æ–°å¢ï¼šè³‡æ–™åº«éŒ¯èª¤ç‹€æ…‹
            const [isLoading, setIsLoading] = useState(false);

            // æª¢æŸ¥ Session
            useEffect(() => {
                const unlocked = sessionStorage.getItem('trip_unlocked_secure');
                if (unlocked === 'true') setIsAuthenticated(true);
            }, []);

            // è®€å– Firebase è³‡æ–™
            useEffect(() => {
                if (!isAuthenticated || !db) return;

                const fetchTripData = async () => {
                    setIsLoading(true);
                    try {
                        // ğŸ”¥ é€™è£¡æ”¹ç”¨ v2 ç‰ˆæœ¬ï¼Œå¼·åˆ¶ä½¿ç”¨æ–°è³‡æ–™åº«æ–‡ä»¶ï¼Œé¿å…èˆŠè³‡æ–™å¹²æ“¾
                        const docRef = doc(db, "trips", "japan2026_v2");
                        const docSnap = await getDoc(docRef);

                        if (docSnap.exists()) {
                            setTripData(docSnap.data());
                            setDbError(null);
                        } else {
                            console.log("No such document! Using default data locally.");
                            // ğŸ”¥ ä¿®æ­£ï¼šæ‰¾ä¸åˆ°é›²ç«¯è³‡æ–™æ™‚ï¼Œç›´æ¥è¼‰å…¥é è¨­å€¼ï¼Œä¸å¡åœ¨åˆå§‹åŒ–ç•«é¢
                            setTripData(DEFAULT_TRIP_DATA);
                            setDbError(null);
                        }
                    } catch (error) {
                        console.error("Error fetching trip data:", error);
                        // ğŸ”¥ éŒ¯èª¤æ•æ‰èˆ‡æç¤º ğŸ”¥
                        if (error.code === 'permission-denied' || error.message.includes('Cloud Firestore API') || error.message.includes('offline') || error.message.includes('Could not reach')) {
                            // åœ¨é•·è¼ªè©¢æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ˜¯å–®ç´”çš„ offline éŒ¯èª¤ï¼Œé€šå¸¸æ˜¯çŸ­æš«ç¶²è·¯å•é¡Œï¼Œä¸éœ€é¡¯ç¤ºå·¨å¤§éŒ¯èª¤
                            if (error.message.includes('offline') || error.message.includes('Could not reach')) {
                                console.warn("Network appears to be offline, using default data.");
                                // åªåœ¨çœŸçš„æ˜¯é›¢ç·šéŒ¯èª¤æ™‚ï¼Œæ¸…é™¤éŒ¯èª¤è¨Šæ¯ä»¥é¡¯ç¤ºå…§å®¹ï¼Œä½†å¯é¸æ“‡é¡¯ç¤ºå°æç¤º
                                setDbError(null); 
                            } else {
                                setDbError("è³‡æ–™åº«å°šæœªå»ºç«‹æˆ–é€£ç·šå¤±æ•—ï¼Œç›®å‰é¡¯ç¤ºé è¨­è³‡æ–™ã€‚");
                            }
                        } else {
                            setDbError("è®€å–å¤±æ•—ï¼š" + error.message);
                        }
                        // å¦‚æœè®€å–å¤±æ•—ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°è³‡æ–™ï¼Œç¢ºä¿è¡Œç¨‹å¯è¦‹
                        setTripData(DEFAULT_TRIP_DATA);
                    } finally {
                        setIsLoading(false);
                    }
                };

                fetchTripData();
            }, [isAuthenticated]);

            const handleUnlock = (e) => {
                e.preventDefault();
                // å†æ¬¡ç¢ºä¿é©—è­‰æ™‚æ¸…é™¤é›œè¨Š
                const cleanInput = password.replace(/[ï¼-ï¼™]/g, s => String.fromCharCode(s.charCodeAt(0) - 0xFEE0)).trim();
                
                if (cleanInput === '1115') {
                    setIsAuthenticated(true);
                    sessionStorage.setItem('trip_unlocked_secure', 'true');
                } else {
                    setAuthError(true);
                    setPassword('');
                }
            };

            const uploadDefaultData = async () => {
                if (!db) {
                    setDbError(`Firebase å°šæœªè¨­å®šæˆ–åˆå§‹åŒ–å¤±æ•—ã€‚\néŒ¯èª¤è©³æƒ…: ${initErrorMsg || "æœªçŸ¥éŒ¯èª¤"}\nè«‹æª¢æŸ¥ Config è¨­å®šã€‚`);
                    return;
                }
                
                setIsUploading(true);
                setDbError(null); // æ¸…é™¤éŒ¯èª¤
                
                try {
                    await setDoc(doc(db, "trips", "japan2026_v2"), DEFAULT_TRIP_DATA);
                    setTripData(DEFAULT_TRIP_DATA);
                    setDbError(null);
                } catch (e) {
                    console.error("Full error:", e);
                    let msg = e.message;
                    if (e.code) msg = `Code: ${e.code} - ${msg}`;
                    
                    if (msg.includes('permission-denied')) {
                        setDbError("æ¬Šé™è¢«æ‹’ (Permission Denied)ï¼š\nè«‹æª¢æŸ¥ Firestore æ˜¯å¦å·²å»ºç«‹ï¼Œä¸¦ä¸”è¦å‰‡è¨­ç‚ºæ¸¬è©¦æ¨¡å¼ (allow read, write: if true;)");
                    } else if (msg.includes('not found') || msg.includes('API')) {
                        setDbError("æ‰¾ä¸åˆ°è³‡æ–™åº« (Not Found)ï¼š\nè«‹å‹™å¿…å» Firebase Console -> Build -> Firestore Database æŒ‰ä¸‹ã€Œå»ºç«‹è³‡æ–™åº«ã€ï¼");
                    } else if (msg.includes('offline')) {
                         setDbError("é›¢ç·šç‹€æ…‹ï¼šç„¡æ³•ä¸Šå‚³è³‡æ–™ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚");
                    } else {
                        setDbError("ä¸Šå‚³ç™¼ç”Ÿæœªé æœŸéŒ¯èª¤ï¼š\n" + msg);
                    }
                }
                setIsUploading(false);
            };

            // å°šæœªè§£é–ç•«é¢
            if (!isAuthenticated) {
                return (
                    <div className="fixed inset-0 bg-stone-100 flex items-center justify-center z-50 p-4">
                        <div className="bg-white p-8 rounded-3xl shadow-xl w-full max-w-sm text-center">
                            <div className="bg-stone-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6">
                                <Lock className="text-stone-600" size={32} />
                            </div>
                            <h2 className="text-2xl font-bold text-stone-800 mb-2">è¡Œç¨‹å·²ä¸Šé–</h2>
                            <p className="text-stone-500 text-sm mb-6">è«‹è¼¸å…¥ 4 ä½æ•¸é€šé—œå¯†ç¢¼</p>
                            <form onSubmit={handleUnlock} className="space-y-4">
                                <div className="relative">
                                    <KeyRound className="absolute left-3 top-1/2 -translate-y-1/2 text-stone-400" size={18} />
                                    <input 
                                        type="password" 
                                        inputMode="numeric"
                                        pattern="[0-9]*"
                                        autoComplete="off"
                                        value={password} 
                                        onChange={(e) => { 
                                            // ğŸ”¥ ä¿®æ­£ï¼šåƒ…è¨­å®šç‹€æ…‹ï¼Œä¸åšå³æ™‚å­—å…ƒæ›¿æ›ï¼Œé¿å…é‡è¤‡è¼¸å…¥å•é¡Œ
                                            setPassword(e.target.value); 
                                            setAuthError(false); 
                                        }} 
                                        className="w-full pl-10 pr-4 py-3 bg-stone-50 border border-stone-200 rounded-xl outline-none focus:border-stone-400 text-center tracking-widest font-bold text-lg" 
                                        placeholder="â€¢â€¢â€¢â€¢" 
                                        maxLength={4} 
                                        autoFocus 
                                    />
                                </div>
                                {authError && <p className="text-red-500 text-xs font-bold animate-pulse">å¯†ç¢¼éŒ¯èª¤</p>}
                                <button type="submit" className="w-full bg-stone-800 text-white py-3 rounded-xl font-bold active:scale-95 transition-transform">è§£é–</button>
                            </form>
                            {!isFirebaseReady && <p className="mt-4 text-xs text-red-500">âš ï¸ Firebase å°šæœªè¨­å®šï¼Œè«‹ä¿®æ”¹ç¨‹å¼ç¢¼è²¼ä¸Š Config</p>}
                        </div>
                    </div>
                );
            }

            // è¼‰å…¥ä¸­ç•«é¢
            if (isLoading && !tripData) {
                return (
                    <div className="min-h-screen bg-stone-100 flex flex-col items-center justify-center p-6 text-center">
                        <div className="loader mb-4"></div>
                        <p className="text-stone-500 text-sm">è³‡æ–™è®€å–ä¸­ï¼Œè«‹ç¨å€™...</p>
                    </div>
                );
            }

            // è¬ä¸€ Firebase è¨­å®šå£äº†ï¼Œçµ¦ä¸€å€‹ fallback
            const displayData = tripData || DEFAULT_TRIP_DATA;
            const isOfflineMode = dbError === null && tripData === DEFAULT_TRIP_DATA;

            return (
                <div className="min-h-screen bg-stone-100 font-sans text-stone-900 pb-24 max-w-md mx-auto shadow-2xl overflow-hidden relative">
                    
                    {/* ğŸ”¥ å…¨å±€éŒ¯èª¤æç¤º ğŸ”¥ */}
                    {dbError && (
                        <div className="bg-red-600 text-white px-4 py-3 text-center text-sm font-bold sticky top-0 z-[60] shadow-md flex items-center justify-center gap-2 whitespace-pre-wrap">
                            <AlertTriangle size={18} className="shrink-0" />
                            <span>{dbError}</span>
                        </div>
                    )}
                    
                    {/* é›¢ç·šæ¨¡å¼æç¤º */}
                    {isOfflineMode && (
                         <div className="bg-amber-100 text-amber-800 px-4 py-2 text-center text-xs font-bold sticky top-0 z-[60] flex items-center justify-center gap-2">
                            <WifiOff size={14} />
                            <span>ç›®å‰ç‚ºé›¢ç·šé è¦½æ¨¡å¼ (ç„¡æ³•å„²å­˜è³‡æ–™åˆ°é›²ç«¯ï¼Œä½†å¯è¨˜å¸³æ–¼æœ¬æ©Ÿ)</span>
                        </div>
                    )}

                    {/* Header */}
                    <header className="bg-stone-800 text-white p-6 pt-12 rounded-b-[2rem] shadow-lg relative z-10">
                        <div className="flex justify-between items-end">
                            <div>
                                <h1 className="text-3xl font-light tracking-tight mb-1">å¤§é˜ªç¥æˆ¶å¯’å‡è¡Œ</h1>
                                <p className="text-stone-400 text-xs tracking-widest">2026.01.11 - 01.18</p>
                            </div>
                            <div className="text-right">
                                <div className="text-4xl font-thin">{displayData.itinerary[0]?.weather?.split(' ')[1] || "8Â°C"}</div>
                                <div className="text-xs text-stone-400">å¤§é˜ªç›®å‰é å ±</div>
                            </div>
                        </div>
                    </header>

                    {/* Content */}
                    <main className="p-4 -mt-4 relative z-0">
                        {activeTab === 'itinerary' && (
                            <div className="animate-fade-in pb-10">
                                {displayData.itinerary.map((day) => (
                                    <DayCard key={day.day} dayData={day} isExpanded={expandedDay === day.day} onToggle={() => setExpandedDay(day.day === expandedDay ? null : day.day)} />
                                ))}
                                {/* è³‡æ–™é‡ç½®æŒ‰éˆ• (é–‹ç™¼ç”¨) */}
                                <div className="mt-8 text-center">
                                    <button onClick={uploadDefaultData} className="text-xs text-stone-400 underline hover:text-stone-600 flex items-center justify-center gap-1 mx-auto">
                                        <RefreshCw size={10} /> é‡ç½®é›²ç«¯è¡Œç¨‹è³‡æ–™
                                    </button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'accounting' && <AccountingTab db={db} isOfflineMode={isOfflineMode} />}

                        {activeTab === 'info' && (
                            <div className="animate-fade-in pt-4 pb-10">
                                
                                {/* ğŸ”¥ é‚„åŸï¼šå¤§é˜ªå¿…è²·ä¼´æ‰‹ç¦® (å®Œæ•´ç‰ˆ) ğŸ”¥ */}
                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 ml-1">å¤§é˜ªå¿…è²·ä¼´æ‰‹ç¦®</h2>
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8 space-y-4">
                                    <div className="bg-orange-50/50 p-3 rounded-xl border border-orange-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-orange-800 text-sm">1. é•·å´å ‚é•·å´è›‹ç³•</span>
                                            <span className="text-[10px] text-stone-400">10:00â€“17:30 (äºŒä¸‰ä¼‘)</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">å¤§é˜ªå¸‚ä¸­å¤®å€å¿ƒé½‹æ©‹ç­‹2-1-29</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">å‰µç«‹100é€±å¹´ä»¥ä¸Šï¼å¤§é˜ªåºœèªè­‰çš„ã€Œå¤§é˜ªç”¢å“ã€ï¼Œå¿…è²·ç¶“å…¸èœ‚èœœè›‹ç³•ã€‚</p>
                                    </div>
                                    <div className="bg-orange-50/50 p-3 rounded-xl border border-orange-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-orange-800 text-sm">2. é˜¿å½Œé™€æ± å¤§é»‘ (é›£æ³¢Walk)</span>
                                            <span className="text-[10px] text-stone-400">10:00â€“21:00</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">å¤§é˜ªå¸‚ä¸­å¤®å€é›£æ³¢2-1-13</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">ç‰¹è‰²ã€Œæ —ç±³é¦™ã€é…¥è„†é¦™ç”œï¼Œã€Œå²©ç±³é¦™ã€å¸¶æœ‰ç”Ÿè–‘è¾›è¾£èˆ‡é»‘ç³–ç”œå‘³ï¼Œå£æ„Ÿç¡¬è„†ã€‚</p>
                                    </div>
                                    <div className="bg-orange-50/50 p-3 rounded-xl border border-orange-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-orange-800 text-sm">3. é£Ÿå€’å¤ªéƒå¸ƒä¸</span>
                                            <span className="text-[10px] text-stone-400">09:30â€“21:30</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">å¤§é˜ªå¸‚ä¸­å¤®å€é“é “å €1-8-25</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">å¤§é˜ªæ‹›ç‰Œäººç‰©ã€Œé£Ÿå€’å¤ªéƒã€ï¼ŒèŒç¿»å¤©çš„å°ä¸‘å¸½åŒ…è£ï¼Œå…§å«ç”œæ»‹æ»‹ç„¦ç³–å¸ƒä¸ã€‚</p>
                                    </div>
                                    <div className="bg-orange-50/50 p-3 rounded-xl border border-orange-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-orange-800 text-sm">4. åƒé³¥å±‹å®—å®¶</span>
                                            <span className="text-[10px] text-stone-400">08:30â€“20:00 (æ—¥ä¼‘)</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">å¤§é˜ªå¸‚ä¸­å¤®å€æœ¬ç”º3-4-12</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">å‰µæ¥­395å¹´ï¼Œå¿…è²·ã€Œã¿ãŸã‚‰ã—å°é¤…ã€ï¼Œç±³é¦™æ¿ƒåšçˆ†æ¼¿é¹¹ç”œé†¬æ± (ä¿å­˜æœŸé™åƒ…3å¤©)ã€‚</p>
                                    </div>
                                    <div className="bg-orange-50/50 p-3 rounded-xl border border-orange-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-orange-800 text-sm">5. UHAå‘³è¦ºç³– Cororo</span>
                                            <span className="text-[10px] text-stone-400">11:00â€“20:00 (é€±æœ«10:00~)</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">å¤§é˜ªå¸‚åŒ—å€è§’ç”°ç”º8âˆ’7 (é˜ªæ€¥æ¢…ç”°B1F)</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">é«˜ç´šç‰ˆCororoï¼Œå°ºå¯¸æ”¾å¤§1.5å€ï¼Œæœæ±å«é‡æ›´é«˜ã€‚æ¨è–¦å·¨å³°è‘¡è„ã€éºé¦™è‘¡è„å£å‘³ã€‚</p>
                                    </div>
                                </div>

                                {/* ğŸ”¥ è£œå›ï¼šå¤§é˜ªå¿…è²·è—¥å¦ & é›»å™¨ ğŸ”¥ */}
                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 ml-1">å¤§é˜ªå¿…è²·è—¥å¦ & é›»å™¨</h2>
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8 space-y-4">
                                    <div className="bg-blue-50/50 p-3 rounded-xl border border-blue-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-blue-800 text-sm">1. é©šå®‰æ®¿å ‚å”å‰è»»å¾· (é“é “å €)</span>
                                            <span className="text-[10px] text-stone-400">24H ç‡Ÿæ¥­</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">7-13 Souemoncho, Chuo Ward, Osaka</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">å•†å“ç¨®é¡æœ€é½Šå…¨ï¼Œ24å°æ™‚ç‡Ÿæ¥­éš¨æ™‚å¯é€›ï¼Œè—¥å¦é›¶é£Ÿé›»å™¨ä¸€ç«™è³¼è¶³ã€‚</p>
                                    </div>
                                    <div className="bg-blue-50/50 p-3 rounded-xl border border-blue-100">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <span className="font-bold text-blue-800 text-sm">2. Bic Camera é›£æ³¢åº—</span>
                                            <span className="text-[10px] text-stone-400">10:00-22:00</span>
                                        </div>
                                        <div className="text-[10px] text-stone-500 mb-1">2 Chome-10-1 Sennichimae, Chuo Ward, Osaka</div>
                                        <p className="text-xs text-stone-600 leading-relaxed">å¤§å‹é›»å™¨é€£é–åº—ï¼Œå„é¡å®¶é›»ã€ç¾å®¹å„€å™¨ã€éŠæˆ²ä¸»æ©Ÿæ‡‰æœ‰ç›¡æœ‰ã€‚</p>
                                    </div>
                                </div>

                                {/* ğŸ”¥ é‚„åŸï¼šé»‘é–€å¸‚å ´ (å®Œæ•´ç‰ˆ) ğŸ”¥ */}
                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 ml-1">é»‘é–€å¸‚å ´ ç¾é£Ÿæ”»ç•¥</h2>
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8 space-y-4">
                                    <div className="flex gap-4 items-start mb-4">
                                        <div className="bg-red-50 p-3 rounded-xl shrink-0 border border-red-100">
                                            <Store className="text-red-600" size={24} />
                                        </div>
                                        <div>
                                            <h3 className="font-bold text-lg text-stone-800">é»‘é–€å¸‚å ´</h3>
                                            <p className="text-xs text-stone-500 mt-1">å¤§é˜ªå¸‚ä¸­å¤®å€æ—¥æœ¬æ©‹2-4-1</p>
                                            <div className="flex gap-2 mt-2">
                                                <span className="bg-stone-100 text-stone-600 text-[10px] px-2 py-1 rounded">è·é£¯åº—æ­¥è¡Œ 5 åˆ†</span>
                                                <span className="bg-stone-100 text-stone-600 text-[10px] px-2 py-1 rounded">08:00-17:00</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr className="border-stone-100" />
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-3 border-l-4 border-orange-400 pl-2">å¿…åƒæ—©é¤ & å°åƒ</h4>
                                        <div className="space-y-3">
                                            <div className="bg-stone-50 p-3 rounded-xl border border-stone-100"><span className="font-bold text-stone-800 text-sm">1. é«˜æ©‹é£Ÿå“è±†æ¼¿</span> <p className="text-xs text-stone-500 mt-1">é—œè¥¿ç¬¬ä¸€åè±†æ¼¿ï¼Œ99å¹´è€åº—ï¼Œæ—©é¤é¦–é¸ã€‚</p></div>
                                            <div className="bg-stone-50 p-3 rounded-xl border border-stone-100"><span className="font-bold text-stone-800 text-sm">2. çŸ³æ©‹é£Ÿå“é—œæ±ç…®</span> <p className="text-xs text-stone-500 mt-1">å¤æ³•çƒ¹èª¿ï¼Œæ¹¯é ­é®®ç¾ï¼Œè˜¿è””å…¥å‘³ã€‚</p></div>
                                            <div className="bg-stone-50 p-3 rounded-xl border border-stone-100"><span className="font-bold text-stone-800 text-sm">3. ã¾ãã‚ã‚„é»’éŠ€é®ªé­š</span> <p className="text-xs text-stone-500 mt-1">å¿…é»ã€Œé»‘é®ªé­šå‰è…¹è‚‰ã€ï¼Œå…¥å£å³åŒ–ã€‚</p></div>
                                            <div className="bg-stone-50 p-3 rounded-xl border border-stone-100"><span className="font-bold text-stone-800 text-sm">4. é­šç¦çƒ¤æ‰‡è²</span> <p className="text-xs text-stone-500 mt-1">å¥¶æ²¹çƒ¤æ‰‡è²å¿…åƒï¼é‚„æœ‰ç¾å‰æµ·è†½ã€‚</p></div>
                                            <div className="bg-stone-50 p-3 rounded-xl border border-stone-100"><span className="font-bold text-stone-800 text-sm">5. è¥¿å·é®®é­šåº—</span> <p className="text-xs text-stone-500 mt-1">æ¯æ—¥æ–°é®®é€²è²¨çš„ç¾å‰–æµ·è†½å’Œç”Ÿè ”ã€‚</p></div>
                                            <div className="bg-stone-50 p-3 rounded-xl border border-stone-100"><span className="font-bold text-stone-800 text-sm">6. ä¸‰éƒ½å±‹è‰è“å¤§ç¦</span> <p className="text-xs text-stone-500 mt-1">70å¹´è€åº—ï¼Œé‚„æœ‰éºé¦™è‘¡è„å£å‘³èˆ‡è•¨é¤…ã€‚</p></div>
                                        </div>
                                    </div>
                                    <hr className="border-stone-100" />
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-3 border-l-4 border-pink-400 pl-2">è—¥å¦ & å¿…è²·</h4>
                                        <div className="space-y-3">
                                            <div className="bg-pink-50/50 p-3 rounded-xl border border-pink-100">
                                                <span className="font-bold text-pink-800 text-sm">1. OS Drug</span>
                                                <p className="text-xs text-stone-600 leading-relaxed mt-1">åƒ¹æ ¼æ¥µå…·ç«¶çˆ­åŠ›ï¼<span className="font-bold text-red-500">æ³¨æ„ï¼šä¸é€€ç¨…ã€ä¸åˆ·å¡ (åƒ…æ”¶ç¾é‡‘)</span>ã€‚</p>
                                            </div>
                                            <div className="bg-pink-50/50 p-3 rounded-xl border border-pink-100">
                                                <span className="font-bold text-pink-800 text-sm">2. é»‘é–€ä¸­å·è¶…å¸‚</span>
                                                <p className="text-xs text-stone-600 leading-relaxed mt-1">24H ç‡Ÿæ¥­ï¼Œç”Ÿé®®è”¬æœã€é›¶é£Ÿè£œè²¨å¥½å»è™•ã€‚</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* ğŸ”¥ é‚„åŸï¼šç¥æˆ¶è‡¨æµ·æ¨‚åœ’ (å®Œæ•´ç‰ˆ) ğŸ”¥ */}
                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 ml-1">ç¥æˆ¶è‡¨æµ·æ¨‚åœ’ æ™¯é»æ”»ç•¥</h2>
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8 space-y-4">
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-3 border-l-4 border-indigo-400 pl-2">è³¼ç‰©ä¸­å¿ƒ</h4>
                                        <div className="space-y-3">
                                            <div className="bg-indigo-50/50 p-3 rounded-xl border border-indigo-100">
                                                <div className="flex items-center gap-1 mb-1"><ShoppingBag size={14} className="text-indigo-600"/><span className="font-bold text-stone-800 text-xs">umie è³¼ç‰©ä¸­å¿ƒ (åŒ—é¤¨/å—é¤¨)</span></div>
                                                <p className="text-[10px] text-stone-500">Uniqlo, GU, ZARA, H&M, GAP, ç„¡å°è‰¯å“, ABC-MART, 3COINS</p>
                                            </div>
                                            <div className="bg-indigo-50/50 p-3 rounded-xl border border-indigo-100">
                                                <div className="flex items-center gap-1 mb-1"><Store size={14} className="text-indigo-600"/><span className="font-bold text-stone-800 text-xs">Mosaic é¦¬è³½å…‹å»£å ´</span></div>
                                                <p className="text-[10px] text-stone-500">é–‹æ”¾å¼æ­é¢¨å•†å ´ï¼Œç‰¹è‰²å°åº—èˆ‡æµ·æ™¯é¤å»³æ—ç«‹ï¼Œé‚„æœ‰éºµåŒ…è¶…äººåšç‰©é¤¨ã€‚</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr className="border-stone-100" />
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-3 border-l-4 border-sky-400 pl-2">å¿…éŠæ™¯é»</h4>
                                        <div className="grid grid-cols-2 gap-3">
                                            <div className="bg-sky-50/50 p-3 rounded-xl border border-sky-100">
                                                <div className="flex items-center gap-1 mb-1"><FerrisWheel size={14} className="text-sky-600"/><span className="font-bold text-stone-800 text-xs">é¦¬è³½å…‹å¤§æ‘©å¤©è¼ª</span></div>
                                                <p className="text-[10px] text-stone-500">è³å¤œæ™¯çµ•ä½³ä½ç½® (Â¥800)</p>
                                            </div>
                                            <div className="bg-sky-50/50 p-3 rounded-xl border border-sky-100">
                                                <div className="flex items-center gap-1 mb-1"><Trees size={14} className="text-sky-600"/><span className="font-bold text-stone-800 text-xs">ç¾åˆ©å …å…¬åœ’</span></div>
                                                <p className="text-[10px] text-stone-500">BE KOBE æ‰“å¡åœ°æ¨™</p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr className="border-stone-100" />
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-3 border-l-4 border-pink-400 pl-2">å¡é€š & IP å°ˆè³£åº—</h4>
                                        <div className="grid grid-cols-2 gap-2">
                                            <div className="bg-pink-50/30 p-2 rounded-lg border border-pink-100"><span className="text-xs font-bold text-stone-700">éºµåŒ…è¶…äººåšç‰©é¤¨</span></div>
                                            <div className="bg-pink-50/30 p-2 rounded-lg border border-pink-100"><span className="text-xs font-bold text-stone-700">å‰åœåŠ›å…±å’Œåœ‹</span></div>
                                            <div className="bg-pink-50/30 p-2 rounded-lg border border-pink-100"><span className="text-xs font-bold text-stone-700">å²åŠªæ¯”å°ˆè³£åº—</span></div>
                                            <div className="bg-pink-50/30 p-2 rounded-lg border border-pink-100"><span className="text-xs font-bold text-stone-700">KIDDY LAND</span></div>
                                            <div className="bg-pink-50/30 p-2 rounded-lg border border-pink-100"><span className="text-xs font-bold text-stone-700">ä¸‰éº—é·—ç¥æˆ¶åº—</span></div>
                                            <div className="bg-pink-50/30 p-2 rounded-lg border border-pink-100"><span className="text-xs font-bold text-stone-700">æ‹‰æ‹‰ç†Šå°ˆè³£åº—</span></div>
                                        </div>
                                    </div>
                                </div>

                                {/* ğŸ”¥ è£œå›ï¼šåŒ—é‡ç•°äººé¤¨ ç¥¨åƒ¹è³‡è¨Š ğŸ”¥ */}
                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 ml-1">åŒ—é‡ç•°äººé¤¨ ç¥¨åƒ¹è³‡è¨Š</h2>
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8 space-y-4">
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-2 border-l-4 border-emerald-500 pl-2">è¶…å€¼å¥—ç¥¨ (Pass)</h4>
                                        <div className="space-y-3">
                                            <div className="bg-emerald-50/50 p-3 rounded-xl border border-emerald-100">
                                                <div className="flex justify-between items-baseline mb-1">
                                                    <span className="font-bold text-emerald-800 text-sm">ç•°äººé¤¨å·¡éŠå°Šè²´é€šè¡Œè­‰ (7é¤¨)</span>
                                                </div>
                                                <div className="flex gap-4 text-xs font-mono text-stone-800">
                                                    <span>æˆäºº <span className="font-bold">Â¥3,300</span></span>
                                                    <span>å…’ç«¥ <span className="font-bold">Â¥880</span></span>
                                                </div>
                                            </div>
                                            <div className="bg-emerald-50/50 p-3 rounded-xl border border-emerald-100">
                                                <div className="flex justify-between items-baseline mb-1">
                                                    <span className="font-bold text-emerald-800 text-sm">å±±æ‰‹4é¤¨é€šè¡Œè­‰</span>
                                                </div>
                                                <div className="text-xs text-stone-600 mb-1">å«ï¼šé­šé±—ä¹‹å®¶ã€å±±æ‰‹å…«ç•ªé¤¨ã€åŒ—é‡å¤–åœ‹äººä¿±æ¨‚éƒ¨ã€å¡é“ä¸Šçš„ç•°äººé¤¨</div>
                                                <div className="flex gap-4 text-xs font-mono text-stone-800">
                                                    <span>æˆäºº <span className="font-bold">Â¥2,200</span></span>
                                                    <span>å…’ç«¥ <span className="font-bold">Â¥550</span></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr className="border-stone-100" />
                                    <div>
                                        <h4 className="text-sm font-bold text-stone-800 mb-2 border-l-4 border-stone-400 pl-2">å–®é¤¨ç¥¨åƒ¹</h4>
                                        <div className="grid gap-2">
                                            <div className="flex justify-between items-center text-xs p-2 bg-stone-50 rounded-lg">
                                                <span className="font-medium text-stone-700">é­šé±—ä¹‹å®¶ & å±•æœ›å°</span>
                                                <span className="font-mono text-stone-500">æˆäºº Â¥1,100 / å…’ç«¥ Â¥220</span>
                                            </div>
                                            <div className="flex justify-between items-center text-xs p-2 bg-stone-50 rounded-lg">
                                                <span className="font-medium text-stone-700">è‹±åœ‹é¤¨</span>
                                                <span className="font-mono text-stone-500">æˆäºº Â¥880 / å…’ç«¥ Â¥220</span>
                                            </div>
                                            <div className="flex justify-between items-center text-xs p-2 bg-stone-50 rounded-lg">
                                                <span className="font-medium text-stone-700">é¢¨è¦‹é›ä¹‹é¤¨ (æ•´ä¿®ä¸­)</span>
                                                <span className="font-mono text-stone-500">æš«åœé–‹æ”¾</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* ğŸ”¥ é‚„åŸï¼šèˆªç­èˆ‡ä½å®¿è³‡è¨Š ğŸ”¥ */}
                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 ml-1">èˆªç­è³‡è¨Š</h2>
                                <InfoCard icon={Plane} title="å»ç¨‹èˆªç­" content={`${displayData.flights.outbound.time} - ${displayData.flights.outbound.arrival}`} subContent={`${displayData.flights.outbound.from} -> ${displayData.flights.outbound.to}`} image={displayData.flights.outbound.image} />
                                <InfoCard icon={Plane} title="å›ç¨‹èˆªç­" content={`${displayData.flights.inbound.time} - ${displayData.flights.inbound.arrival}`} subContent={`${displayData.flights.inbound.from} -> ${displayData.flights.inbound.to}`} />

                                <h2 className="text-stone-500 text-xs font-bold uppercase tracking-widest mb-4 mt-8 ml-1">ä½å®¿è³‡è¨Š</h2>
                                {displayData.hotels.map((hotel, i) => (
                                    <div key={i} className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-4 overflow-hidden">
                                        {hotel.image && (
                                            <div className="h-48 -mx-5 -mt-5 mb-4 overflow-hidden relative">
                                                <img src={hotel.image} alt={hotel.name} className="w-full h-full object-cover" />
                                            </div>
                                        )}
                                        <div className="flex gap-2 items-center mb-2">
                                            <div className="bg-indigo-50 text-indigo-600 p-2 rounded-lg"><BedDouble size={20}/></div>
                                            <div>
                                                <div className="text-xs text-stone-400">{hotel.period}</div>
                                                <h3 className="font-bold text-stone-800">{hotel.name}</h3>
                                            </div>
                                        </div>
                                        <div className="text-sm text-stone-600 mb-3">{hotel.address}</div>
                                        <div className="flex gap-2 mb-3">
                                            <span className="text-xs bg-stone-100 px-2 py-1 rounded text-stone-500">In: {hotel.checkIn}</span>
                                            <span className="text-xs bg-stone-100 px-2 py-1 rounded text-stone-500">Out: {hotel.checkOut}</span>
                                        </div>
                                        <div className="text-xs text-stone-500 bg-stone-50 p-2 rounded border border-stone-100">
                                            <span className="font-bold">Note:</span> {hotel.note}
                                        </div>
                                        <div className="mt-3 flex justify-end">
                                            <NavButton address={hotel.address} />
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </main>

                    {/* Bottom Nav */}
                    <nav className="fixed bottom-6 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md border border-stone-200 shadow-2xl rounded-full px-6 py-3 flex gap-8 items-center z-50">
                        <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'itinerary' ? 'text-stone-800' : 'text-stone-400'}`}>
                            <Calendar size={20} strokeWidth={activeTab === 'itinerary' ? 2.5 : 2} /><span className="text-[10px] font-medium">è¡Œç¨‹</span>
                        </button>
                        <button onClick={() => setActiveTab('accounting')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'accounting' ? 'text-stone-800' : 'text-stone-400'}`}>
                            <Wallet size={20} strokeWidth={activeTab === 'accounting' ? 2.5 : 2} /><span className="text-[10px] font-medium">è¨˜å¸³</span>
                        </button>
                        <button onClick={() => setActiveTab('info')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'info' ? 'text-stone-800' : 'text-stone-400'}`}>
                            <Info size={20} strokeWidth={activeTab === 'info' ? 2.5 : 2} /><span className="text-[10px] font-medium">è³‡è¨Š</span>
                        </button>
                    </nav>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
